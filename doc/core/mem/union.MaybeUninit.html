<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="åŒ…è£…å™¨ç±»å‹ï¼Œç”¨äºåˆ›å»º `T` çš„æœªåˆå§‹åŒ–å®ä¾‹ã€‚"><meta name="keywords" content="rust, rustlang, rust-lang, MaybeUninit"><title>MaybeUninit in core::mem - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize1.55.0.css"><link rel="stylesheet" type="text/css" href="../../rustdoc1.55.0.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../light1.55.0.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../dark1.55.0.css" disabled ><link rel="stylesheet" type="text/css" href="../../ayu1.55.0.css" disabled ><script id="default-settings"></script><script src="../../storage1.55.0.js"></script><script src="../../crates1.55.0.js"></script><noscript><link rel="stylesheet" href="../../noscript1.55.0.css"></noscript><link rel="icon" type="image/svg+xml" href="../../favicon1.55.0.svg">
<link rel="alternate icon" type="image/png" href="../../favicon-16x161.55.0.png">
<link rel="alternate icon" type="image/png" href="../../favicon-32x321.55.0.png"><style type="text/css">#crate-search{background-image:url("../../down-arrow1.55.0.svg");}</style></head><body class="rustdoc union"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../../core/index.html'><div class='logo-container rust-logo'><img src='../../rust-logo1.55.0.png' alt='logo'></div></a><h2 class="location">Union MaybeUninit</h2><div class="sidebar-elems"><div class="block items"><h3 class="sidebar-title"><a href="#implementations">Methods</a></h3><div class="sidebar-links"><a href="#method.array_assume_init">array_assume_init</a><a href="#method.as_mut_ptr">as_mut_ptr</a><a href="#method.as_ptr">as_ptr</a><a href="#method.assume_init">assume_init</a><a href="#method.assume_init_drop">assume_init_drop</a><a href="#method.assume_init_mut">assume_init_mut</a><a href="#method.assume_init_read">assume_init_read</a><a href="#method.assume_init_ref">assume_init_ref</a><a href="#method.new">new</a><a href="#method.slice_as_mut_ptr">slice_as_mut_ptr</a><a href="#method.slice_as_ptr">slice_as_ptr</a><a href="#method.slice_assume_init_mut">slice_assume_init_mut</a><a href="#method.slice_assume_init_ref">slice_assume_init_ref</a><a href="#method.uninit">uninit</a><a href="#method.uninit_array">uninit_array</a><a href="#method.write">write</a><a href="#method.write_slice">write_slice</a><a href="#method.write_slice_cloned">write_slice_cloned</a><a href="#method.zeroed">zeroed</a></div><h3 class="sidebar-title"><a href="#trait-implementations">Trait Implementations</a></h3><div class="sidebar-links"><a href="#impl-Clone">Clone</a><a href="#impl-Copy">Copy</a><a href="#impl-Debug">Debug</a></div><h3 class="sidebar-title"><a href="#synthetic-implementations">Auto Trait Implementations</a></h3><div class="sidebar-links"><a href="#impl-Send">Send</a><a href="#impl-Sync">Sync</a><a href="#impl-Unpin">Unpin</a></div><h3 class="sidebar-title"><a href="#blanket-implementations">Blanket Implementations</a></h3><div class="sidebar-links"><a href="#impl-Any">Any</a><a href="#impl-Borrow%3CT%3E">Borrow&lt;T&gt;</a><a href="#impl-BorrowMut%3CT%3E">BorrowMut&lt;T&gt;</a><a href="#impl-From%3CT%3E">From&lt;T&gt;</a><a href="#impl-Into%3CU%3E">Into&lt;U&gt;</a><a href="#impl-TryFrom%3CU%3E">TryFrom&lt;U&gt;</a><a href="#impl-TryInto%3CU%3E">TryInto&lt;U&gt;</a></div></div><h2 class="location">Other items in<br><a href="../index.html">core</a>::<wbr><a href="index.html">mem</a></h2><div id="sidebar-vars" data-name="MaybeUninit" data-ty="union" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img src="../../brush1.55.0.svg" width="18" height="18" alt="Pick another theme!"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press â€˜Sâ€™ to search, â€˜?â€™ for more optionsâ€¦" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img src="../../wheel1.55.0.svg" width="18" height="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Union <a href="../index.html">core</a>::<wbr><a href="index.html">mem</a>::<wbr><a class="union" href="#">MaybeUninit</a><button id="copy-path" onclick="copy_path(this)" title="copy path"><img src="../../clipboard1.55.0.svg" width="19" height="18" alt="Copy item import" title="Copy item import to clipboard"></button></span><span class="out-of-band"><span class="since" title="Stable since Rust version 1.36.0">1.36.0</span><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../src/core/mem/maybe_uninit.rs.html#255-258" title="goto source code">[src]</a></span></h1><div class="docblock type-decl"><pre class="rust union">#[repr(transparent)]
pub union MaybeUninit&lt;T&gt; {
    // some fields omitted
}</pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>åŒ…è£…å™¨ç±»å‹ï¼Œç”¨äºåˆ›å»º <code>T</code> çš„æœªåˆå§‹åŒ–å®ä¾‹ã€‚</p>
<h1 id="åˆå§‹åŒ–ä¸å˜å¼" class="section-header"><a href="#åˆå§‹åŒ–ä¸å˜å¼">åˆå§‹åŒ–ä¸å˜å¼</a></h1>
<p>é€šå¸¸ï¼Œç¼–è¯‘å™¨å‡å®šå·²æ ¹æ®å˜é‡ç±»å‹çš„è¦æ±‚æ­£ç¡®åˆå§‹åŒ–äº†å˜é‡ã€‚ä¾‹å¦‚ï¼Œå¼•ç”¨ç±»å‹çš„å˜é‡å¿…é¡»å¯¹é½ä¸”éç©ºã€‚
å³ä½¿åœ¨ä¸å®‰å…¨çš„ä»£ç ä¸­ï¼Œè¿™ä¹Ÿå¿…é¡»å§‹ç»ˆä¿æŒä¸å˜ã€‚
ç»“æœï¼Œå°†å¼•ç”¨ç±»å‹çš„å˜é‡åˆå§‹åŒ–ä¸ºé›¶ä¼šå¯¼è‡´ç¬æ—¶ <a href="../../reference/behavior-considered-undefined.html">undefined behavior</a>ï¼Œæ— è®ºå¼•ç”¨æ˜¯å¦æ›¾ç»è¢«ç”¨æ¥è®¿é—®å†…å­˜:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">std::mem</span>::{<span class="self">self</span>, <span class="ident">MaybeUninit</span>};

<span class="kw">let</span> <span class="ident">x</span>: <span class="kw-2">&amp;</span><span class="ident">i32</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">mem::zeroed</span>() }; <span class="comment">// æœªå®šä¹‰çš„è¡Œä¸º! âš ï¸</span>
<span class="comment">// ä¸ `MaybeUninit&lt;&amp;i32&gt;` ç­‰æ•ˆçš„ä»£ç :</span>
<span class="kw">let</span> <span class="ident">x</span>: <span class="kw-2">&amp;</span><span class="ident">i32</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">MaybeUninit::zeroed</span>().<span class="ident">assume_init</span>() }; <span class="comment">// æœªå®šä¹‰çš„è¡Œä¸º! âš ï¸</span></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Ballow(invalid_value)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3A%7Bself%2C%20MaybeUninit%7D%3B%0A%0Alet%20x%3A%20%26i32%20%3D%20unsafe%20%7B%20mem%3A%3Azeroed()%20%7D%3B%20%2F%2F%20%E6%9C%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E8%A1%8C%E4%B8%BA!%20%E2%9A%A0%EF%B8%8F%0A%2F%2F%20%E4%B8%8E%20%60MaybeUninit%3C%26i32%3E%60%20%E7%AD%89%E6%95%88%E7%9A%84%E4%BB%A3%E7%A0%81%3A%0Alet%20x%3A%20%26i32%20%3D%20unsafe%20%7B%20MaybeUninit%3A%3Azeroed().assume_init()%20%7D%3B%20%2F%2F%20%E6%9C%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E8%A1%8C%E4%B8%BA!%20%E2%9A%A0%EF%B8%8F%0A%7D&amp;edition=2018">Run</a></div>
<p>ç¼–è¯‘å™¨å°†å…¶ç”¨äºå„ç§ä¼˜åŒ–ï¼Œä¾‹å¦‚æ¶ˆé™¤è¿è¡Œæ—¶æ£€æŸ¥å’Œä¼˜åŒ– <code>enum</code> å¸ƒå±€ã€‚</p>
<p>åŒæ ·ï¼Œå®Œå…¨æœªåˆå§‹åŒ–çš„å­˜å‚¨å™¨å¯ä»¥åŒ…å«ä»»ä½•å†…å®¹ï¼Œè€Œ <code>bool</code> å¿…é¡»å§‹ç»ˆä¸º <code>true</code> æˆ– <code>false</code>ã€‚å› æ­¤ï¼Œåˆ›å»ºæœªåˆå§‹åŒ–çš„ <code>bool</code> æ˜¯æœªå®šä¹‰çš„è¡Œä¸º:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">std::mem</span>::{<span class="self">self</span>, <span class="ident">MaybeUninit</span>};

<span class="kw">let</span> <span class="ident">b</span>: <span class="ident">bool</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">mem::uninitialized</span>() }; <span class="comment">// æœªå®šä¹‰çš„è¡Œä¸º! âš ï¸</span>
<span class="comment">// ä¸ `MaybeUninit&lt;bool&gt;` ç­‰æ•ˆçš„ä»£ç :</span>
<span class="kw">let</span> <span class="ident">b</span>: <span class="ident">bool</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">MaybeUninit::uninit</span>().<span class="ident">assume_init</span>() }; <span class="comment">// æœªå®šä¹‰çš„è¡Œä¸º! âš ï¸</span></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Ballow(invalid_value)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3A%7Bself%2C%20MaybeUninit%7D%3B%0A%0Alet%20b%3A%20bool%20%3D%20unsafe%20%7B%20mem%3A%3Auninitialized()%20%7D%3B%20%2F%2F%20%E6%9C%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E8%A1%8C%E4%B8%BA!%20%E2%9A%A0%EF%B8%8F%0A%2F%2F%20%E4%B8%8E%20%60MaybeUninit%3Cbool%3E%60%20%E7%AD%89%E6%95%88%E7%9A%84%E4%BB%A3%E7%A0%81%3A%0Alet%20b%3A%20bool%20%3D%20unsafe%20%7B%20MaybeUninit%3A%3Auninit().assume_init()%20%7D%3B%20%2F%2F%20%E6%9C%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E8%A1%8C%E4%B8%BA!%20%E2%9A%A0%EF%B8%8F%0A%7D&amp;edition=2018">Run</a></div>
<p>æ­¤å¤–ï¼Œæœªåˆå§‹åŒ–çš„å­˜å‚¨å™¨çš„ç‰¹æ®Šä¹‹å¤„åœ¨äºå®ƒæ²¡æœ‰å›ºå®šçš„å€¼ (â€œfixedâ€ è¡¨ç¤º â€œit wonâ€™t change without being written toâ€)ã€‚å¤šæ¬¡è¯»å–ç›¸åŒçš„æœªåˆå§‹åŒ–å­—èŠ‚ä¼šäº§ç”Ÿä¸åŒçš„ç»“æœã€‚
è¿™ä½¿å¾—åœ¨å˜é‡ä¸­å…·æœ‰æœªåˆå§‹åŒ–çš„æ•°æ®æˆä¸ºæœªå®šä¹‰çš„è¡Œä¸ºï¼Œå³ä½¿è¯¥å˜é‡å…·æœ‰æ•´æ•°ç±»å‹ä¹Ÿå¯ä»¥ä¿ç•™ä»»ä½•å›ºå®šä½æ¨¡å¼</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">std::mem</span>::{<span class="self">self</span>, <span class="ident">MaybeUninit</span>};

<span class="kw">let</span> <span class="ident">x</span>: <span class="ident">i32</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">mem::uninitialized</span>() }; <span class="comment">// æœªå®šä¹‰çš„è¡Œä¸º! âš ï¸</span>
<span class="comment">// ä¸ `MaybeUninit&lt;i32&gt;` ç­‰æ•ˆçš„ä»£ç :</span>
<span class="kw">let</span> <span class="ident">x</span>: <span class="ident">i32</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">MaybeUninit::uninit</span>().<span class="ident">assume_init</span>() }; <span class="comment">// æœªå®šä¹‰çš„è¡Œä¸º! âš ï¸</span></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Ballow(invalid_value)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3A%7Bself%2C%20MaybeUninit%7D%3B%0A%0Alet%20x%3A%20i32%20%3D%20unsafe%20%7B%20mem%3A%3Auninitialized()%20%7D%3B%20%2F%2F%20%E6%9C%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E8%A1%8C%E4%B8%BA!%20%E2%9A%A0%EF%B8%8F%0A%2F%2F%20%E4%B8%8E%20%60MaybeUninit%3Ci32%3E%60%20%E7%AD%89%E6%95%88%E7%9A%84%E4%BB%A3%E7%A0%81%3A%0Alet%20x%3A%20i32%20%3D%20unsafe%20%7B%20MaybeUninit%3A%3Auninit().assume_init()%20%7D%3B%20%2F%2F%20%E6%9C%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E8%A1%8C%E4%B8%BA!%20%E2%9A%A0%EF%B8%8F%0A%7D&amp;edition=2018">Run</a></div>
<p>(è¯·æ³¨æ„ï¼Œå…³äºæœªåˆå§‹åŒ–æ•´æ•°çš„è§„åˆ™å°šæœªæœ€ç»ˆç¡®å®šï¼Œä½†æ˜¯é™¤éè¢«ç¡®å®šï¼Œå¦åˆ™å»ºè®®é¿å…ä½¿ç”¨å®ƒä»¬ã€‚)</p>
<p>æœ€é‡è¦çš„æ˜¯ï¼Œè¯·è®°ä½ï¼Œå¤§å¤šæ•°ç±»å‹å…·æœ‰å…¶ä»–ä¸å˜å¼ï¼Œè€Œä¸ä»…ä»…æ˜¯åœ¨ç±»å‹çº§åˆ«è¢«åˆå§‹åŒ–ã€‚
ä¾‹å¦‚ï¼Œå°† <code>1</code> åˆå§‹åŒ–çš„ <a href="../../std/vec/struct.Vec.html"><code>Vec&lt;T&gt;</code></a> è§†ä¸ºå·²åˆå§‹åŒ– (åœ¨å½“å‰å®ç°ä¸‹; è¿™å¹¶ä¸æ„æˆç¨³å®šçš„ä¿è¯)ï¼Œå› ä¸ºç¼–è¯‘å™¨çŸ¥é“çš„å”¯ä¸€è¦æ±‚æ˜¯æ•°æ®æŒ‡é’ˆå¿…é¡»ä¸ºéç©ºå€¼ã€‚
åˆ›å»ºè¿™æ ·çš„ <code>Vec&lt;T&gt;</code> ä¸ä¼šç«‹å³å¯¼è‡´æœªå®šä¹‰çš„è¡Œä¸ºï¼Œä½†æ˜¯åœ¨å¤§å¤šæ•°å®‰å…¨æ“ä½œ (åŒ…æ‹¬ä¸¢å¼ƒæ“ä½œ) ä¸­éƒ½å°†å¯¼è‡´æœªå®šä¹‰çš„è¡Œä¸ºã€‚</p>
<h1 id="examples" class="section-header"><a href="#examples">Examples</a></h1>
<p><code>MaybeUninit&lt;T&gt;</code> ç”¨äºä½¿ä¸å®‰å…¨çš„ä»£ç èƒ½å¤Ÿå¤„ç†æœªåˆå§‹åŒ–çš„æ•°æ®ã€‚
è¿™æ˜¯å‘ç¼–è¯‘å™¨å‘å‡ºçš„ä¿¡å·ï¼ŒæŒ‡ç¤ºæ­¤å¤„çš„æ•°æ®å¯èƒ½ä¸è¢«åˆå§‹åŒ–:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">std::mem::MaybeUninit</span>;

<span class="comment">// åˆ›å»ºä¸€ä¸ªæ˜¾å¼æœªåˆå§‹åŒ–çš„å¼•ç”¨ã€‚</span>
<span class="comment">// ç¼–è¯‘å™¨çŸ¥é“ `MaybeUninit&lt;T&gt;` å†…éƒ¨çš„æ•°æ®å¯èƒ½æ— æ•ˆï¼Œå› æ­¤ä¸æ˜¯ UB:</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">x</span> <span class="op">=</span> <span class="ident">MaybeUninit</span>::<span class="op">&lt;</span><span class="kw-2">&amp;</span><span class="ident">i32</span><span class="op">&gt;</span><span class="ident">::uninit</span>();
<span class="comment">// å°†å…¶è®¾ç½®ä¸ºæœ‰æ•ˆå€¼ã€‚</span>
<span class="ident">x</span>.<span class="ident">write</span>(<span class="kw-2">&amp;</span><span class="number">0</span>);
<span class="comment">// æå–å·²åˆå§‹åŒ–çš„æ•°æ® - ä»…åœ¨æ­£ç¡®åˆå§‹åŒ– `x` ä¹‹å * æ‰å…è®¸è¿™æ ·åš!</span>
<span class="kw">let</span> <span class="ident">x</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">x</span>.<span class="ident">assume_init</span>() };</pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3AMaybeUninit%3B%0A%0A%2F%2F%20%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%98%BE%E5%BC%8F%E6%9C%AA%E5%88%9D%E5%A7%8B%E5%8C%96%E7%9A%84%E5%BC%95%E7%94%A8%E3%80%82%0A%2F%2F%20%E7%BC%96%E8%AF%91%E5%99%A8%E7%9F%A5%E9%81%93%20%60MaybeUninit%3CT%3E%60%20%E5%86%85%E9%83%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%83%BD%E6%97%A0%E6%95%88%EF%BC%8C%E5%9B%A0%E6%AD%A4%E4%B8%8D%E6%98%AF%20UB%3A%0Alet%20mut%20x%20%3D%20MaybeUninit%3A%3A%3C%26i32%3E%3A%3Auninit()%3B%0A%2F%2F%20%E5%B0%86%E5%85%B6%E8%AE%BE%E7%BD%AE%E4%B8%BA%E6%9C%89%E6%95%88%E5%80%BC%E3%80%82%0Ax.write(%260)%3B%0A%2F%2F%20%E6%8F%90%E5%8F%96%E5%B7%B2%E5%88%9D%E5%A7%8B%E5%8C%96%E7%9A%84%E6%95%B0%E6%8D%AE%20-%20%E4%BB%85%E5%9C%A8%E6%AD%A3%E7%A1%AE%E5%88%9D%E5%A7%8B%E5%8C%96%20%60x%60%20%E4%B9%8B%E5%90%8E%20*%20%E6%89%8D%E5%85%81%E8%AE%B8%E8%BF%99%E6%A0%B7%E5%81%9A!%0Alet%20x%20%3D%20unsafe%20%7B%20x.assume_init()%20%7D%3B%0A%7D&amp;edition=2018">Run</a></div>
<p>ç„¶åï¼Œç¼–è¯‘å™¨çŸ¥é“ä¸ä¼šå¯¹æ­¤ä»£ç è¿›è¡Œä»»ä½•é”™è¯¯çš„å‡è®¾æˆ–ä¼˜åŒ–ã€‚</p>
<p>æ‚¨å¯ä»¥è®¤ä¸º <code>MaybeUninit&lt;T&gt;</code> æœ‰ç‚¹åƒ <code>Option&lt;T&gt;</code>ï¼Œä½†æ˜¯æ²¡æœ‰ä»»ä½•è¿è¡Œæ—¶è·Ÿè¸ªä¸”æ²¡æœ‰ä»»ä½•å®‰å…¨æ£€æŸ¥ã€‚</p>
<h2 id="out-pointers" class="section-header"><a href="#out-pointers">out-pointers</a></h2>
<p>æ‚¨å¯ä»¥ä½¿ç”¨ <code>MaybeUninit&lt;T&gt;</code> æ¥å®ç° â€œout-pointersâ€: ä¸å…¶ä»å‡½æ•°ä¸­è¿”å›æ•°æ®ï¼Œè¿˜ä¸å¦‚å°†å…¶ä¼ é€’ç»™æŸä¸ª (uninitialized) å†…å­˜çš„æŒ‡é’ˆä»¥å°†ç»“æœæ”¾å…¥å…¶ä¸­ã€‚
å½“å¯¹è°ƒç”¨æ–¹æ¥è¯´ï¼Œæ§åˆ¶ç»“æœå­˜å‚¨åœ¨å†…å­˜ä¸­çš„åˆ†é…æ–¹å¼å¾ˆé‡è¦å¹¶ä¸”æ‚¨å¸Œæœ›é¿å…ä¸å¿…è¦çš„ç§»åŠ¨æ—¶ï¼Œè¿™å¾ˆæœ‰ç”¨ã€‚</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">std::mem::MaybeUninit</span>;

<span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">make_vec</span>(<span class="ident">out</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">i32</span><span class="op">&gt;</span>) {
    <span class="comment">// `write` ä¸ä¼šä¸¢å¼ƒè€çš„å†…å®¹ï¼Œè¿™ä¸€ç‚¹å¾ˆé‡è¦ã€‚</span>
    <span class="ident">out</span>.<span class="ident">write</span>(<span class="macro">vec!</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);
}

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">v</span> <span class="op">=</span> <span class="ident">MaybeUninit::uninit</span>();
<span class="kw">unsafe</span> { <span class="ident">make_vec</span>(<span class="ident">v</span>.<span class="ident">as_mut_ptr</span>()); }
<span class="comment">// ç°åœ¨æˆ‘ä»¬çŸ¥é“ `v` å·²åˆå§‹åŒ–! è¿™ä¹Ÿå¯ä»¥ç¡®ä¿æ­£ç¡®ä¸¢å¼ƒ vectorã€‚</span>
<span class="kw">let</span> <span class="ident">v</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">v</span>.<span class="ident">assume_init</span>() };
<span class="macro">assert_eq!</span>(<span class="kw-2">&amp;</span><span class="ident">v</span>, <span class="kw-2">&amp;</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3AMaybeUninit%3B%0A%0Aunsafe%20fn%20make_vec(out%3A%20*mut%20Vec%3Ci32%3E)%20%7B%0A%20%20%20%20%2F%2F%20%60write%60%20%E4%B8%8D%E4%BC%9A%E4%B8%A2%E5%BC%83%E8%80%81%E7%9A%84%E5%86%85%E5%AE%B9%EF%BC%8C%E8%BF%99%E4%B8%80%E7%82%B9%E5%BE%88%E9%87%8D%E8%A6%81%E3%80%82%0A%20%20%20%20out.write(vec!%5B1%2C%202%2C%203%5D)%3B%0A%7D%0A%0Alet%20mut%20v%20%3D%20MaybeUninit%3A%3Auninit()%3B%0Aunsafe%20%7B%20make_vec(v.as_mut_ptr())%3B%20%7D%0A%2F%2F%20%E7%8E%B0%E5%9C%A8%E6%88%91%E4%BB%AC%E7%9F%A5%E9%81%93%20%60v%60%20%E5%B7%B2%E5%88%9D%E5%A7%8B%E5%8C%96!%20%E8%BF%99%E4%B9%9F%E5%8F%AF%E4%BB%A5%E7%A1%AE%E4%BF%9D%E6%AD%A3%E7%A1%AE%E4%B8%A2%E5%BC%83%20vector%E3%80%82%0Alet%20v%20%3D%20unsafe%20%7B%20v.assume_init()%20%7D%3B%0Aassert_eq!(%26v%2C%20%26%5B1%2C%202%2C%203%5D)%3B%0A%7D&amp;edition=2018">Run</a></div>
<h2 id="é€å…ƒç´ åˆå§‹åŒ–æ•°ç»„" class="section-header"><a href="#é€å…ƒç´ åˆå§‹åŒ–æ•°ç»„">é€å…ƒç´ åˆå§‹åŒ–æ•°ç»„</a></h2>
<p><code>MaybeUninit&lt;T&gt;</code> å¯ç”¨äºæŒ‰å…ƒç´ åˆå§‹åŒ–å¤§å‹æ•°ç»„:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">std::mem</span>::{<span class="self">self</span>, <span class="ident">MaybeUninit</span>};

<span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> {
    <span class="comment">// åˆ›å»ºä¸€ä¸ªæœªåˆå§‹åŒ–çš„ `MaybeUninit` æ•°ç»„ã€‚</span>
    <span class="comment">// `assume_init` æ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºæˆ‘ä»¬å£°ç§°è¿™é‡Œå·²ç»åˆå§‹åŒ–çš„ç±»å‹æ˜¯ä¸€å † `MaybeUninit`ï¼Œä¸éœ€è¦åˆå§‹åŒ–ã€‚</span>
    <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">data</span>: [<span class="ident">MaybeUninit</span><span class="op">&lt;</span><span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">u32</span><span class="op">&gt;</span><span class="op">&gt;</span>; <span class="number">1000</span>] <span class="op">=</span> <span class="kw">unsafe</span> {
        <span class="ident">MaybeUninit::uninit</span>().<span class="ident">assume_init</span>()
    };

    <span class="comment">// ä¸¢å¼ƒ `MaybeUninit` ä¸ä¼šæ‰§è¡Œä»»ä½•æ“ä½œã€‚</span>
    <span class="comment">// å› æ­¤ï¼Œä½¿ç”¨è£¸æŒ‡é’ˆåˆ†é…ä»£æ›¿ `ptr::write` ä¸ä¼šå¯¼è‡´æ—§çš„æœªåˆå§‹åŒ–å€¼è¢«ä¸¢å¼ƒã€‚</span>
    <span class="comment">// æ­¤å¤–ï¼Œå¦‚æœåœ¨æ­¤å¾ªç¯æœŸé—´å­˜åœ¨ panicï¼Œåˆ™å¯èƒ½ä¼šå‘ç”Ÿå†…å­˜æ³„æ¼ï¼Œä½†ä¸ä¼šå‡ºç°å†…å­˜å®‰å…¨é—®é¢˜ã€‚</span>
    <span class="kw">for</span> <span class="ident">elem</span> <span class="kw">in</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">data</span>[..] {
        <span class="ident">elem</span>.<span class="ident">write</span>(<span class="macro">vec!</span>[<span class="number">42</span>]);
    }

    <span class="comment">// ä¸€åˆ‡éƒ½å·²åˆå§‹åŒ–ã€‚</span>
    <span class="comment">// å°†æ•°ç»„è½¬æ¢ä¸ºåˆå§‹åŒ–çš„ç±»å‹ã€‚</span>
    <span class="kw">unsafe</span> { <span class="ident">mem::transmute</span>::<span class="op">&lt;</span><span class="kw">_</span>, [<span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">u32</span><span class="op">&gt;</span>; <span class="number">1000</span>]<span class="op">&gt;</span>(<span class="ident">data</span>) }
};

<span class="macro">assert_eq!</span>(<span class="kw-2">&amp;</span><span class="ident">data</span>[<span class="number">0</span>], <span class="kw-2">&amp;</span>[<span class="number">42</span>]);</pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3A%7Bself%2C%20MaybeUninit%7D%3B%0A%0Alet%20data%20%3D%20%7B%0A%20%20%20%20%2F%2F%20%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%9C%AA%E5%88%9D%E5%A7%8B%E5%8C%96%E7%9A%84%20%60MaybeUninit%60%20%E6%95%B0%E7%BB%84%E3%80%82%0A%20%20%20%20%2F%2F%20%60assume_init%60%20%E6%98%AF%E5%AE%89%E5%85%A8%E7%9A%84%EF%BC%8C%E5%9B%A0%E4%B8%BA%E6%88%91%E4%BB%AC%E5%A3%B0%E7%A7%B0%E8%BF%99%E9%87%8C%E5%B7%B2%E7%BB%8F%E5%88%9D%E5%A7%8B%E5%8C%96%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%98%AF%E4%B8%80%E5%A0%86%20%60MaybeUninit%60%EF%BC%8C%E4%B8%8D%E9%9C%80%E8%A6%81%E5%88%9D%E5%A7%8B%E5%8C%96%E3%80%82%0A%20%20%20%20let%20mut%20data%3A%20%5BMaybeUninit%3CVec%3Cu32%3E%3E%3B%201000%5D%20%3D%20unsafe%20%7B%0A%20%20%20%20%20%20%20%20MaybeUninit%3A%3Auninit().assume_init()%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20%E4%B8%A2%E5%BC%83%20%60MaybeUninit%60%20%E4%B8%8D%E4%BC%9A%E6%89%A7%E8%A1%8C%E4%BB%BB%E4%BD%95%E6%93%8D%E4%BD%9C%E3%80%82%0A%20%20%20%20%2F%2F%20%E5%9B%A0%E6%AD%A4%EF%BC%8C%E4%BD%BF%E7%94%A8%E8%A3%B8%E6%8C%87%E9%92%88%E5%88%86%E9%85%8D%E4%BB%A3%E6%9B%BF%20%60ptr%3A%3Awrite%60%20%E4%B8%8D%E4%BC%9A%E5%AF%BC%E8%87%B4%E6%97%A7%E7%9A%84%E6%9C%AA%E5%88%9D%E5%A7%8B%E5%8C%96%E5%80%BC%E8%A2%AB%E4%B8%A2%E5%BC%83%E3%80%82%0A%20%20%20%20%2F%2F%20%E6%AD%A4%E5%A4%96%EF%BC%8C%E5%A6%82%E6%9E%9C%E5%9C%A8%E6%AD%A4%E5%BE%AA%E7%8E%AF%E6%9C%9F%E9%97%B4%E5%AD%98%E5%9C%A8%20panic%EF%BC%8C%E5%88%99%E5%8F%AF%E8%83%BD%E4%BC%9A%E5%8F%91%E7%94%9F%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%EF%BC%8C%E4%BD%86%E4%B8%8D%E4%BC%9A%E5%87%BA%E7%8E%B0%E5%86%85%E5%AD%98%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98%E3%80%82%0A%20%20%20%20for%20elem%20in%20%26mut%20data%5B..%5D%20%7B%0A%20%20%20%20%20%20%20%20elem.write(vec!%5B42%5D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20%E4%B8%80%E5%88%87%E9%83%BD%E5%B7%B2%E5%88%9D%E5%A7%8B%E5%8C%96%E3%80%82%0A%20%20%20%20%2F%2F%20%E5%B0%86%E6%95%B0%E7%BB%84%E8%BD%AC%E6%8D%A2%E4%B8%BA%E5%88%9D%E5%A7%8B%E5%8C%96%E7%9A%84%E7%B1%BB%E5%9E%8B%E3%80%82%0A%20%20%20%20unsafe%20%7B%20mem%3A%3Atransmute%3A%3A%3C_%2C%20%5BVec%3Cu32%3E%3B%201000%5D%3E(data)%20%7D%0A%7D%3B%0A%0Aassert_eq!(%26data%5B0%5D%2C%20%26%5B42%5D)%3B%0A%7D&amp;edition=2018">Run</a></div>
<p>æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨éƒ¨åˆ†åˆå§‹åŒ–çš„æ•°ç»„ï¼Œè¿™äº›æ•°ç»„å¯ä»¥åœ¨ä¸ç¨³å®šçš„æ•°æ®ç»“æ„ä¸­æ‰¾åˆ°ã€‚</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">std::mem::MaybeUninit</span>;
<span class="kw">use</span> <span class="ident">std::ptr</span>;

<span class="comment">// åˆ›å»ºä¸€ä¸ªæœªåˆå§‹åŒ–çš„ `MaybeUninit` æ•°ç»„ã€‚</span>
<span class="comment">// `assume_init` æ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºæˆ‘ä»¬å£°ç§°è¿™é‡Œå·²ç»åˆå§‹åŒ–çš„ç±»å‹æ˜¯ä¸€å † `MaybeUninit`ï¼Œä¸éœ€è¦åˆå§‹åŒ–ã€‚</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">data</span>: [<span class="ident">MaybeUninit</span><span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span>; <span class="number">1000</span>] <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">MaybeUninit::uninit</span>().<span class="ident">assume_init</span>() };
<span class="comment">// è®¡ç®—æˆ‘ä»¬åˆ†é…çš„å…ƒç´ æ•°ã€‚</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">data_len</span>: <span class="ident">usize</span> <span class="op">=</span> <span class="number">0</span>;

<span class="kw">for</span> <span class="ident">elem</span> <span class="kw">in</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">data</span>[<span class="number">0</span>..<span class="number">500</span>] {
    <span class="ident">elem</span>.<span class="ident">write</span>(<span class="ident">String::from</span>(<span class="string">&quot;hello&quot;</span>));
    <span class="ident">data_len</span> <span class="op">+</span><span class="op">=</span> <span class="number">1</span>;
}

<span class="comment">// å¯¹äºæ•°ç»„ä¸­çš„æ¯ä¸ªé¡¹ï¼Œå¦‚æœæˆ‘ä»¬åˆ†é…äº†å®ƒï¼Œåˆ™å°†å…¶ä¸¢å¼ƒã€‚</span>
<span class="kw">for</span> <span class="ident">elem</span> <span class="kw">in</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">data</span>[<span class="number">0</span>..<span class="ident">data_len</span>] {
    <span class="kw">unsafe</span> { <span class="ident">ptr::drop_in_place</span>(<span class="ident">elem</span>.<span class="ident">as_mut_ptr</span>()); }
}</pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3AMaybeUninit%3B%0Ause%20std%3A%3Aptr%3B%0A%0A%2F%2F%20%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%9C%AA%E5%88%9D%E5%A7%8B%E5%8C%96%E7%9A%84%20%60MaybeUninit%60%20%E6%95%B0%E7%BB%84%E3%80%82%0A%2F%2F%20%60assume_init%60%20%E6%98%AF%E5%AE%89%E5%85%A8%E7%9A%84%EF%BC%8C%E5%9B%A0%E4%B8%BA%E6%88%91%E4%BB%AC%E5%A3%B0%E7%A7%B0%E8%BF%99%E9%87%8C%E5%B7%B2%E7%BB%8F%E5%88%9D%E5%A7%8B%E5%8C%96%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%98%AF%E4%B8%80%E5%A0%86%20%60MaybeUninit%60%EF%BC%8C%E4%B8%8D%E9%9C%80%E8%A6%81%E5%88%9D%E5%A7%8B%E5%8C%96%E3%80%82%0Alet%20mut%20data%3A%20%5BMaybeUninit%3CString%3E%3B%201000%5D%20%3D%20unsafe%20%7B%20MaybeUninit%3A%3Auninit().assume_init()%20%7D%3B%0A%2F%2F%20%E8%AE%A1%E7%AE%97%E6%88%91%E4%BB%AC%E5%88%86%E9%85%8D%E7%9A%84%E5%85%83%E7%B4%A0%E6%95%B0%E3%80%82%0Alet%20mut%20data_len%3A%20usize%20%3D%200%3B%0A%0Afor%20elem%20in%20%26mut%20data%5B0..500%5D%20%7B%0A%20%20%20%20elem.write(String%3A%3Afrom(%22hello%22))%3B%0A%20%20%20%20data_len%20%2B%3D%201%3B%0A%7D%0A%0A%2F%2F%20%E5%AF%B9%E4%BA%8E%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E6%AF%8F%E4%B8%AA%E9%A1%B9%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%88%91%E4%BB%AC%E5%88%86%E9%85%8D%E4%BA%86%E5%AE%83%EF%BC%8C%E5%88%99%E5%B0%86%E5%85%B6%E4%B8%A2%E5%BC%83%E3%80%82%0Afor%20elem%20in%20%26mut%20data%5B0..data_len%5D%20%7B%0A%20%20%20%20unsafe%20%7B%20ptr%3A%3Adrop_in_place(elem.as_mut_ptr())%3B%20%7D%0A%7D%0A%7D&amp;edition=2018">Run</a></div>
<h2 id="é€åœºåˆå§‹åŒ–ç»“æ„ä½“" class="section-header"><a href="#é€åœºåˆå§‹åŒ–ç»“æ„ä½“">é€åœºåˆå§‹åŒ–ç»“æ„ä½“</a></h2>
<p>æ‚¨å¯ä»¥ä½¿ç”¨ <code>MaybeUninit&lt;T&gt;</code> å’Œ <a href="../ptr/macro.addr_of_mut.html"><code>std::ptr::addr_of_mut</code></a> å®æ¥é€å­—æ®µåˆå§‹åŒ–ç»“æ„ä½“:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">std::mem::MaybeUninit</span>;
<span class="kw">use</span> <span class="ident">std::ptr::addr_of_mut</span>;

<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">PartialEq</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Foo</span> {
    <span class="ident">name</span>: <span class="ident">String</span>,
    <span class="ident">list</span>: <span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">u8</span><span class="op">&gt;</span>,
}

<span class="kw">let</span> <span class="ident">foo</span> <span class="op">=</span> {
    <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">uninit</span>: <span class="ident">MaybeUninit</span><span class="op">&lt;</span><span class="ident">Foo</span><span class="op">&gt;</span> <span class="op">=</span> <span class="ident">MaybeUninit::uninit</span>();
    <span class="kw">let</span> <span class="ident">ptr</span> <span class="op">=</span> <span class="ident">uninit</span>.<span class="ident">as_mut_ptr</span>();

    <span class="comment">// åˆå§‹åŒ– `name` å­—æ®µ ä½¿ç”¨ `write` è€Œä¸æ˜¯é€šè¿‡ `=` èµ‹å€¼ï¼Œè€Œä¸æ˜¯åœ¨æ—§çš„ã€æœªåˆå§‹åŒ–çš„å€¼ä¸Šè°ƒç”¨ `drop`ã€‚</span>
    <span class="kw">unsafe</span> { <span class="macro">addr_of_mut!</span>((<span class="kw-2">*</span><span class="ident">ptr</span>).<span class="ident">name</span>).<span class="ident">write</span>(<span class="string">&quot;Bob&quot;</span>.<span class="ident">to_string</span>()); }

    <span class="comment">// åˆå§‹åŒ– `list` å­—æ®µå¦‚æœæ­¤å¤„å­˜åœ¨ panicï¼Œåˆ™ `name` å­—æ®µä¸­çš„ `String` æ³„æ¼ã€‚</span>
    <span class="kw">unsafe</span> { <span class="macro">addr_of_mut!</span>((<span class="kw-2">*</span><span class="ident">ptr</span>).<span class="ident">list</span>).<span class="ident">write</span>(<span class="macro">vec!</span>[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]); }

    <span class="comment">// æ‰€æœ‰å­—æ®µéƒ½å·²åˆå§‹åŒ–ï¼Œå› æ­¤æˆ‘ä»¬è°ƒç”¨ `assume_init` æ¥è·å–å·²åˆå§‹åŒ–çš„ Fooã€‚</span>
    <span class="kw">unsafe</span> { <span class="ident">uninit</span>.<span class="ident">assume_init</span>() }
};

<span class="macro">assert_eq!</span>(
    <span class="ident">foo</span>,
    <span class="ident">Foo</span> {
        <span class="ident">name</span>: <span class="string">&quot;Bob&quot;</span>.<span class="ident">to_string</span>(),
        <span class="ident">list</span>: <span class="macro">vec!</span>[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]
    }
);</pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3AMaybeUninit%3B%0Ause%20std%3A%3Aptr%3A%3Aaddr_of_mut%3B%0A%0A%23%5Bderive(Debug%2C%20PartialEq)%5D%0Apub%20struct%20Foo%20%7B%0A%20%20%20%20name%3A%20String%2C%0A%20%20%20%20list%3A%20Vec%3Cu8%3E%2C%0A%7D%0A%0Alet%20foo%20%3D%20%7B%0A%20%20%20%20let%20mut%20uninit%3A%20MaybeUninit%3CFoo%3E%20%3D%20MaybeUninit%3A%3Auninit()%3B%0A%20%20%20%20let%20ptr%20%3D%20uninit.as_mut_ptr()%3B%0A%0A%20%20%20%20%2F%2F%20%E5%88%9D%E5%A7%8B%E5%8C%96%20%60name%60%20%E5%AD%97%E6%AE%B5%20%E4%BD%BF%E7%94%A8%20%60write%60%20%E8%80%8C%E4%B8%8D%E6%98%AF%E9%80%9A%E8%BF%87%20%60%3D%60%20%E8%B5%8B%E5%80%BC%EF%BC%8C%E8%80%8C%E4%B8%8D%E6%98%AF%E5%9C%A8%E6%97%A7%E7%9A%84%E3%80%81%E6%9C%AA%E5%88%9D%E5%A7%8B%E5%8C%96%E7%9A%84%E5%80%BC%E4%B8%8A%E8%B0%83%E7%94%A8%20%60drop%60%E3%80%82%0A%20%20%20%20unsafe%20%7B%20addr_of_mut!((*ptr).name).write(%22Bob%22.to_string())%3B%20%7D%0A%0A%20%20%20%20%2F%2F%20%E5%88%9D%E5%A7%8B%E5%8C%96%20%60list%60%20%E5%AD%97%E6%AE%B5%E5%A6%82%E6%9E%9C%E6%AD%A4%E5%A4%84%E5%AD%98%E5%9C%A8%20panic%EF%BC%8C%E5%88%99%20%60name%60%20%E5%AD%97%E6%AE%B5%E4%B8%AD%E7%9A%84%20%60String%60%20%E6%B3%84%E6%BC%8F%E3%80%82%0A%20%20%20%20unsafe%20%7B%20addr_of_mut!((*ptr).list).write(vec!%5B0%2C%201%2C%202%5D)%3B%20%7D%0A%0A%20%20%20%20%2F%2F%20%E6%89%80%E6%9C%89%E5%AD%97%E6%AE%B5%E9%83%BD%E5%B7%B2%E5%88%9D%E5%A7%8B%E5%8C%96%EF%BC%8C%E5%9B%A0%E6%AD%A4%E6%88%91%E4%BB%AC%E8%B0%83%E7%94%A8%20%60assume_init%60%20%E6%9D%A5%E8%8E%B7%E5%8F%96%E5%B7%B2%E5%88%9D%E5%A7%8B%E5%8C%96%E7%9A%84%20Foo%E3%80%82%0A%20%20%20%20unsafe%20%7B%20uninit.assume_init()%20%7D%0A%7D%3B%0A%0Aassert_eq!(%0A%20%20%20%20foo%2C%0A%20%20%20%20Foo%20%7B%0A%20%20%20%20%20%20%20%20name%3A%20%22Bob%22.to_string()%2C%0A%20%20%20%20%20%20%20%20list%3A%20vec!%5B0%2C%201%2C%202%5D%0A%20%20%20%20%7D%0A)%3B%0A%7D&amp;edition=2018">Run</a></div>
<h1 id="layout" class="section-header"><a href="#layout">Layout</a></h1>
<p><code>MaybeUninit&lt;T&gt;</code> ä¿è¯å…·æœ‰ä¸ <code>T</code> ç›¸åŒçš„å¤§å°ï¼Œå¯¹é½æ–¹å¼å’Œ ABI:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">std::mem</span>::{<span class="ident">MaybeUninit</span>, <span class="ident">size_of</span>, <span class="ident">align_of</span>};
<span class="macro">assert_eq!</span>(<span class="ident">size_of</span>::<span class="op">&lt;</span><span class="ident">MaybeUninit</span><span class="op">&lt;</span><span class="ident">u64</span><span class="op">&gt;</span><span class="op">&gt;</span>(), <span class="ident">size_of</span>::<span class="op">&lt;</span><span class="ident">u64</span><span class="op">&gt;</span>());
<span class="macro">assert_eq!</span>(<span class="ident">align_of</span>::<span class="op">&lt;</span><span class="ident">MaybeUninit</span><span class="op">&lt;</span><span class="ident">u64</span><span class="op">&gt;</span><span class="op">&gt;</span>(), <span class="ident">align_of</span>::<span class="op">&lt;</span><span class="ident">u64</span><span class="op">&gt;</span>());</pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3A%7BMaybeUninit%2C%20size_of%2C%20align_of%7D%3B%0Aassert_eq!(size_of%3A%3A%3CMaybeUninit%3Cu64%3E%3E()%2C%20size_of%3A%3A%3Cu64%3E())%3B%0Aassert_eq!(align_of%3A%3A%3CMaybeUninit%3Cu64%3E%3E()%2C%20align_of%3A%3A%3Cu64%3E())%3B%0A%7D&amp;edition=2018">Run</a></div>
<p>ä½†æ˜¯è¯·è®°ä½ï¼Œ<em>åŒ…å«</em><code>MaybeUninit&lt;T&gt;</code> çš„ç±»å‹ä¸ä¸€å®šæ˜¯ç›¸åŒçš„å¸ƒå±€ã€‚Rust é€šå¸¸ä¸ä¿è¯ <code>Foo&lt;T&gt;</code> çš„å­—æ®µå…·æœ‰ä¸ <code>Foo&lt;U&gt;</code> ç›¸åŒçš„é¡ºåºï¼Œå³ä½¿ <code>T</code> å’Œ <code>U</code> å…·æœ‰ç›¸åŒçš„å¤§å°å’Œå¯¹é½æ–¹å¼ã€‚</p>
<p>æ­¤å¤–ï¼Œç”±äºä»»ä½•ä½å€¼å¯¹äº <code>MaybeUninit&lt;T&gt;</code> éƒ½æ˜¯æœ‰æ•ˆçš„ï¼Œå› æ­¤ç¼–è¯‘å™¨æ— æ³•åº”ç”¨ non-zero/niche-filling ä¼˜åŒ–ï¼Œä»è€Œå¯èƒ½å¯¼è‡´æ›´å¤§çš„å¤§å°:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="macro">assert_eq!</span>(<span class="ident">size_of</span>::<span class="op">&lt;</span><span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">bool</span><span class="op">&gt;</span><span class="op">&gt;</span>(), <span class="number">1</span>);
<span class="macro">assert_eq!</span>(<span class="ident">size_of</span>::<span class="op">&lt;</span><span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">MaybeUninit</span><span class="op">&lt;</span><span class="ident">bool</span><span class="op">&gt;</span><span class="op">&gt;</span><span class="op">&gt;</span>(), <span class="number">2</span>);</pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3A%7BMaybeUninit%2C%20size_of%7D%3B%0Aassert_eq!(size_of%3A%3A%3COption%3Cbool%3E%3E()%2C%201)%3B%0Aassert_eq!(size_of%3A%3A%3COption%3CMaybeUninit%3Cbool%3E%3E%3E()%2C%202)%3B%0A%7D&amp;edition=2018">Run</a></div>
<p>å¦‚æœ <code>T</code> æ˜¯ FFI å®‰å…¨çš„ï¼Œåˆ™ <code>MaybeUninit&lt;T&gt;</code> ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p>
<p>è™½ç„¶ <code>MaybeUninit</code> æ˜¯ <code>#[repr(transparent)]</code> (è¡¨ç¤ºå®ƒä¿è¯ä¸ <code>T</code> ç›¸åŒçš„å¤§å°ï¼Œå¯¹é½æ–¹å¼å’Œ ABI)ï¼Œä½†æ˜¯è¿™ <em>ä¸ä¼š</em> æ›´æ”¹ä»»ä½•å…ˆå‰çš„è­¦å‘Šã€‚
<code>Option&lt;T&gt;</code> å’Œ <code>Option&lt;MaybeUninit&lt;T&gt;&gt;</code> å¯èƒ½ä»å…·æœ‰ä¸åŒçš„å¤§å°ï¼Œå¹¶ä¸”åŒ…å« <code>T</code> ç±»å‹çš„å­—æ®µçš„ç±»å‹çš„å¸ƒå±€ (å’Œå¤§å°) å¯èƒ½ä¸è¯¥å­—æ®µä¸º <code>MaybeUninit&lt;T&gt;</code> çš„æƒ…å†µä¸åŒã€‚
<code>MaybeUninit</code> æ˜¯ä¸€ä¸ªæ˜¯è”åˆç±»å‹ï¼Œå¹¶ä¸” union ä¸Šçš„ <code>#[repr(transparent)]</code> æ˜¯ä¸ç¨³å®šçš„ (è¯·å‚è§ <a href="https://github.com/rust-lang/rust/issues/60405">è·Ÿè¸ªé—®é¢˜</a>)ã€‚
éšç€æ—¶é—´çš„æ¨ç§»ï¼Œå¯¹ union çš„ <code>#[repr(transparent)]</code> çš„ç¡®åˆ‡ä¿è¯å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå¹¶ä¸” <code>MaybeUninit</code> å¯èƒ½ä¼šæˆ–å¯èƒ½ä¸ä¼šä¿ç•™ <code>#[repr(transparent)]</code>ã€‚
å°±æ˜¯è¯´ï¼Œ<code>MaybeUninit&lt;T&gt;</code> å°†æ€»æ˜¯ä¿è¯å®ƒå…·æœ‰ä¸ <code>T</code> æœ‰ç›¸åŒçš„å¤§å°ã€å¯¹é½æ–¹å¼å’Œ ABI; åªæ˜¯ <code>MaybeUninit</code> å®ç°ä¿è¯çš„æ–¹å¼å¯èƒ½ä¼šæ¼”å˜ã€‚</p>
</div></details><h2 id="implementations" class="small-section-header">Implementations<a href="#implementations" class="anchor"></a></h2><details class="rustdoc-toggle implementors-toggle" open><summary><div id="impl" class="impl has-srclink"><h3 class="code-header in-band">impl&lt;T&gt; <a class="union" href="union.MaybeUninit.html" title="union core::mem::MaybeUninit">MaybeUninit</a>&lt;T&gt;</h3><a href="#impl" class="anchor"></a><a class="srclink" href="../../src/core/mem/maybe_uninit.rs.html#276-1158" title="goto source code">[src]</a></div></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><div id="method.new" class="method has-srclink"><h4 class="code-header">pub const fn <a href="#method.new" class="fnname">new</a>(val: T) -&gt; <a class="union" href="union.MaybeUninit.html" title="union core::mem::MaybeUninit">MaybeUninit</a>&lt;T&gt;</h4><span class="since" title="Stable since Rust version 1.36.0, const since 1.36.0">1.36.0 (const: 1.36.0)</span><a href="#method.new" class="anchor"></a><a class="srclink" href="../../src/core/mem/maybe_uninit.rs.html#295-297" title="goto source code">[src]</a></div></summary><div class="docblock"><p>åˆ›å»ºä¸€ä¸ªä½¿ç”¨ç»™å®šå€¼åˆå§‹åŒ–çš„æ–° <code>MaybeUninit&lt;T&gt;</code>ã€‚
åœ¨æ­¤å‡½æ•°çš„è¿”å›å€¼ä¸Šè°ƒç”¨ <a href="union.MaybeUninit.html#method.assume_init"><code>assume_init</code></a> æ˜¯å®‰å…¨çš„ã€‚</p>
<p>æ³¨æ„ï¼Œä¸¢å¼ƒ <code>MaybeUninit&lt;T&gt;</code> æ°¸è¿œä¸ä¼šè°ƒç”¨ T çš„ä¸¢å¼ƒä»£ç ã€‚
ç¡®ä¿ <code>T</code> åœ¨åˆå§‹åŒ–æ—¶è¢«ä¸¢å¼ƒæ˜¯æ‚¨çš„è´£ä»»ã€‚</p>
<h1 id="example" class="section-header"><a href="#example">Example</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">std::mem::MaybeUninit</span>;

<span class="kw">let</span> <span class="ident">v</span>: <span class="ident">MaybeUninit</span><span class="op">&lt;</span><span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">u8</span><span class="op">&gt;</span><span class="op">&gt;</span> <span class="op">=</span> <span class="ident">MaybeUninit::new</span>(<span class="macro">vec!</span>[<span class="number">42</span>]);</pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3AMaybeUninit%3B%0A%0Alet%20v%3A%20MaybeUninit%3CVec%3Cu8%3E%3E%20%3D%20MaybeUninit%3A%3Anew(vec!%5B42%5D)%3B%0A%7D&amp;edition=2018">Run</a></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.uninit" class="method has-srclink"><h4 class="code-header">pub const fn <a href="#method.uninit" class="fnname">uninit</a>() -&gt; <a class="union" href="union.MaybeUninit.html" title="union core::mem::MaybeUninit">MaybeUninit</a>&lt;T&gt;</h4><span class="since" title="Stable since Rust version 1.36.0, const since 1.36.0">1.36.0 (const: 1.36.0)</span><a href="#method.uninit" class="anchor"></a><a class="srclink" href="../../src/core/mem/maybe_uninit.rs.html#317-319" title="goto source code">[src]</a></div></summary><div class="docblock"><p>ä»¥æœªåˆå§‹åŒ–çš„çŠ¶æ€åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>MaybeUninit&lt;T&gt;</code>ã€‚</p>
<p>æ³¨æ„ï¼Œä¸¢å¼ƒ <code>MaybeUninit&lt;T&gt;</code> æ°¸è¿œä¸ä¼šè°ƒç”¨ T çš„ä¸¢å¼ƒä»£ç ã€‚
ç¡®ä¿ <code>T</code> åœ¨åˆå§‹åŒ–æ—¶è¢«ä¸¢å¼ƒæ˜¯æ‚¨çš„è´£ä»»ã€‚</p>
<p>æœ‰å…³ä¸€äº›ç¤ºä¾‹ï¼Œè¯·å‚è§ <a href="union.MaybeUninit.html" title="MaybeUninit">ç±»å‹çº§æ–‡æ¡£</a>ã€‚</p>
<h1 id="example-1" class="section-header"><a href="#example-1">Example</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">std::mem::MaybeUninit</span>;

<span class="kw">let</span> <span class="ident">v</span>: <span class="ident">MaybeUninit</span><span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span> <span class="op">=</span> <span class="ident">MaybeUninit::uninit</span>();</pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3AMaybeUninit%3B%0A%0Alet%20v%3A%20MaybeUninit%3CString%3E%20%3D%20MaybeUninit%3A%3Auninit()%3B%0A%7D&amp;edition=2018">Run</a></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.uninit_array" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.uninit_array" class="fnname">uninit_array</a>&lt;const LEN:&nbsp;usize&gt;() -&gt; [Self; LEN]</h4><a href="#method.uninit_array" class="anchor"></a><a class="srclink" href="../../src/core/mem/maybe_uninit.rs.html#353-356" title="goto source code">[src]</a></div><div class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span> This is a nightly-only experimental API. (<code>maybe_uninit_uninit_array</code>)</div></div></summary><div class="docblock"><p>åœ¨æœªåˆå§‹åŒ–çŠ¶æ€ä¸‹åˆ›å»º <code>MaybeUninit&lt;T&gt;</code> é¡¹çš„æ–°æ•°ç»„ã€‚</p>
<p>Note: åœ¨ future Rust ç‰ˆæœ¬ä¸­ï¼Œå½“ Rust å…è®¸ <a href="https://github.com/rust-lang/rust/issues/76001">inline const expressions</a> æ—¶ï¼Œæ­¤æ–¹æ³•å¯èƒ½å˜å¾—ä¸å¿…è¦ã€‚</p>
<p>ä¸‹é¢çš„ç¤ºä¾‹å¯ä»¥ä½¿ç”¨ <code>let mut buf = [const { MaybeUninit::&lt;u8&gt;::uninit() }; 32];</code>ã€‚</p>
<h1 id="examples-1" class="section-header"><a href="#examples-1">Examples</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="attribute">#![<span class="ident">feature</span>(<span class="ident">maybe_uninit_uninit_array</span>, <span class="ident">maybe_uninit_extra</span>, <span class="ident">maybe_uninit_slice</span>)]</span>

<span class="kw">use</span> <span class="ident">std::mem::MaybeUninit</span>;

<span class="kw">extern</span> <span class="string">&quot;C&quot;</span> {
    <span class="kw">fn</span> <span class="ident">read_into_buffer</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">u8</span>, <span class="ident">max_len</span>: <span class="ident">usize</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">usize</span>;
}

<span class="doccomment">/// è¿”å›å®é™…è¯»å–çš„ (å¯èƒ½è¾ƒå°çš„) æ•°æ®åˆ‡ç‰‡</span>
<span class="kw">fn</span> <span class="ident">read</span>(<span class="ident">buf</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> [<span class="ident">MaybeUninit</span><span class="op">&lt;</span><span class="ident">u8</span><span class="op">&gt;</span>]) <span class="op">-</span><span class="op">&gt;</span> <span class="kw-2">&amp;</span>[<span class="ident">u8</span>] {
    <span class="kw">unsafe</span> {
        <span class="kw">let</span> <span class="ident">len</span> <span class="op">=</span> <span class="ident">read_into_buffer</span>(<span class="ident">buf</span>.<span class="ident">as_mut_ptr</span>() <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">u8</span>, <span class="ident">buf</span>.<span class="ident">len</span>());
        <span class="ident">MaybeUninit::slice_assume_init_ref</span>(<span class="kw-2">&amp;</span><span class="ident">buf</span>[..<span class="ident">len</span>])
    }
}

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">buf</span>: [<span class="ident">MaybeUninit</span><span class="op">&lt;</span><span class="ident">u8</span><span class="op">&gt;</span>; <span class="number">32</span>] <span class="op">=</span> <span class="ident">MaybeUninit::uninit_array</span>();
<span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="ident">read</span>(<span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">buf</span>);</pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(maybe_uninit_uninit_array%2C%20maybe_uninit_extra%2C%20maybe_uninit_slice)%5D%0A%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3AMaybeUninit%3B%0A%0Aextern%20%22C%22%20%7B%0A%20%20%20%20fn%20read_into_buffer(ptr%3A%20*mut%20u8%2C%20max_len%3A%20usize)%20-%3E%20usize%3B%0A%7D%0A%0A%2F%2F%2F%20%E8%BF%94%E5%9B%9E%E5%AE%9E%E9%99%85%E8%AF%BB%E5%8F%96%E7%9A%84%20(%E5%8F%AF%E8%83%BD%E8%BE%83%E5%B0%8F%E7%9A%84)%20%E6%95%B0%E6%8D%AE%E5%88%87%E7%89%87%0Afn%20read(buf%3A%20%26mut%20%5BMaybeUninit%3Cu8%3E%5D)%20-%3E%20%26%5Bu8%5D%20%7B%0A%20%20%20%20unsafe%20%7B%0A%20%20%20%20%20%20%20%20let%20len%20%3D%20read_into_buffer(buf.as_mut_ptr()%20as%20*mut%20u8%2C%20buf.len())%3B%0A%20%20%20%20%20%20%20%20MaybeUninit%3A%3Aslice_assume_init_ref(%26buf%5B..len%5D)%0A%20%20%20%20%7D%0A%7D%0A%0Alet%20mut%20buf%3A%20%5BMaybeUninit%3Cu8%3E%3B%2032%5D%20%3D%20MaybeUninit%3A%3Auninit_array()%3B%0Alet%20data%20%3D%20read(%26mut%20buf)%3B%0A%7D&amp;version=nightly&amp;edition=2018">Run</a></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.zeroed" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.zeroed" class="fnname">zeroed</a>() -&gt; <a class="union" href="union.MaybeUninit.html" title="union core::mem::MaybeUninit">MaybeUninit</a>&lt;T&gt;</h4><a href="#method.zeroed" class="anchor"></a><a class="srclink" href="../../src/core/mem/maybe_uninit.rs.html#396-403" title="goto source code">[src]</a></div></summary><div class="docblock"><p>åœ¨æœªåˆå§‹åŒ–çŠ¶æ€ä¸‹åˆ›å»ºæ–°çš„ <code>MaybeUninit&lt;T&gt;</code>ï¼Œå¹¶ç”¨ <code>0</code> å­—èŠ‚å¡«å……å†…å­˜ã€‚å–å†³äº <code>T</code> æ˜¯å¦å·²ç»è¿›è¡Œäº†æ­£ç¡®çš„åˆå§‹åŒ–ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåˆå§‹åŒ– <code>MaybeUninit&lt;usize&gt;::zeroed()</code>ï¼Œä½†ä¸åˆå§‹åŒ– <code>MaybeUninit&lt;&amp;'static i32&gt;::zeroed()</code>ï¼Œå› ä¸ºå¼•ç”¨ä¸èƒ½ä¸ºç©ºã€‚</p>
<p>æ³¨æ„ï¼Œä¸¢å¼ƒ <code>MaybeUninit&lt;T&gt;</code> æ°¸è¿œä¸ä¼šè°ƒç”¨ T çš„ä¸¢å¼ƒä»£ç ã€‚
ç¡®ä¿ <code>T</code> åœ¨åˆå§‹åŒ–æ—¶è¢«ä¸¢å¼ƒæ˜¯æ‚¨çš„è´£ä»»ã€‚</p>
<h1 id="example-2" class="section-header"><a href="#example-2">Example</a></h1>
<p>æ­¤å‡½æ•°çš„æ­£ç¡®ç”¨æ³•: ç”¨é›¶åˆå§‹åŒ–ç»“æ„ä½“ï¼Œå…¶ä¸­ç»“æ„ä½“çš„æ‰€æœ‰å­—æ®µéƒ½å¯ä»¥å°†ä½æ¨¡å¼ 0 ä¿ç•™ä¸ºæœ‰æ•ˆå€¼ã€‚</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">std::mem::MaybeUninit</span>;

<span class="kw">let</span> <span class="ident">x</span> <span class="op">=</span> <span class="ident">MaybeUninit</span>::<span class="op">&lt;</span>(<span class="ident">u8</span>, <span class="ident">bool</span>)<span class="op">&gt;</span><span class="ident">::zeroed</span>();
<span class="kw">let</span> <span class="ident">x</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">x</span>.<span class="ident">assume_init</span>() };
<span class="macro">assert_eq!</span>(<span class="ident">x</span>, (<span class="number">0</span>, <span class="bool-val">false</span>));</pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3AMaybeUninit%3B%0A%0Alet%20x%20%3D%20MaybeUninit%3A%3A%3C(u8%2C%20bool)%3E%3A%3Azeroed()%3B%0Alet%20x%20%3D%20unsafe%20%7B%20x.assume_init()%20%7D%3B%0Aassert_eq!(x%2C%20(0%2C%20false))%3B%0A%7D&amp;edition=2018">Run</a></div>
<p>è¯¥å‡½æ•°çš„ <em>é”™è¯¯</em> ç”¨æ³•: å½“ <code>0</code> ä¸æ˜¯è¯¥ç±»å‹çš„æœ‰æ•ˆä½æ¨¡å¼æ—¶ï¼Œè°ƒç”¨ <code>x.zeroed().assume_init()</code>:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">std::mem::MaybeUninit</span>;

<span class="kw">enum</span> <span class="ident">NotZero</span> { <span class="ident">One</span> <span class="op">=</span> <span class="number">1</span>, <span class="ident">Two</span> <span class="op">=</span> <span class="number">2</span> }

<span class="kw">let</span> <span class="ident">x</span> <span class="op">=</span> <span class="ident">MaybeUninit</span>::<span class="op">&lt;</span>(<span class="ident">u8</span>, <span class="ident">NotZero</span>)<span class="op">&gt;</span><span class="ident">::zeroed</span>();
<span class="kw">let</span> <span class="ident">x</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">x</span>.<span class="ident">assume_init</span>() };
<span class="comment">// åœ¨ä¸€ä¸ªå¯¹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ²¡æœ‰æœ‰æ•ˆåˆ¤åˆ«å¼çš„ `NotZero`ã€‚</span>
<span class="comment">// è¿™æ˜¯æœªå®šä¹‰çš„è¡Œä¸ºã€‚âš ï¸</span></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3AMaybeUninit%3B%0A%0Aenum%20NotZero%20%7B%20One%20%3D%201%2C%20Two%20%3D%202%20%7D%0A%0Alet%20x%20%3D%20MaybeUninit%3A%3A%3C(u8%2C%20NotZero)%3E%3A%3Azeroed()%3B%0Alet%20x%20%3D%20unsafe%20%7B%20x.assume_init()%20%7D%3B%0A%2F%2F%20%E5%9C%A8%E4%B8%80%E4%B8%AA%E5%AF%B9%E4%B8%AD%EF%BC%8C%E6%88%91%E4%BB%AC%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%B2%A1%E6%9C%89%E6%9C%89%E6%95%88%E5%88%A4%E5%88%AB%E5%BC%8F%E7%9A%84%20%60NotZero%60%E3%80%82%0A%2F%2F%20%E8%BF%99%E6%98%AF%E6%9C%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E8%A1%8C%E4%B8%BA%E3%80%82%E2%9A%A0%EF%B8%8F%0A%7D&amp;edition=2018">Run</a></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.write" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.write" class="fnname">write</a>(&amp;mut self, val: T) -&gt; &amp;mut T</h4><span class="since" title="Stable since Rust version 1.55.0">1.55.0</span><a href="#method.write" class="anchor"></a><a class="srclink" href="../../src/core/mem/maybe_uninit.rs.html#490-494" title="goto source code">[src]</a></div></summary><div class="docblock"><p>è®¾ç½® <code>MaybeUninit&lt;T&gt;</code> çš„å€¼ã€‚</p>
<p>è¿™å°†è¦†ç›–ä»»ä½•å…ˆå‰çš„å€¼è€Œä¸å°†å…¶ä¸¢å¼ƒï¼Œå› æ­¤è¯·æ³¨æ„ä¸è¦é‡å¤ä½¿ç”¨æ­¤ä¸¤æ¬¡ï¼Œé™¤éæ‚¨è¦è·³è¿‡è¿è¡Œææ„å‡½æ•°ã€‚
ä¸ºäº†æ‚¨çš„æ–¹ä¾¿ï¼Œè¿™ä¹Ÿå°† <code>self</code> çš„å†…å®¹ (ç°åœ¨å·²å®‰å…¨åˆå§‹åŒ–) è¿”å›å˜é‡å¼•ç”¨ã€‚</p>
<p>ç”±äºå†…å®¹å­˜å‚¨åœ¨ <code>MaybeUninit</code> ä¸­ï¼Œå¦‚æœ MaybeUninit ç¦»å¼€ä½œç”¨åŸŸè€Œæ²¡æœ‰è°ƒç”¨åˆ° <a href="union.MaybeUninit.html#method.assume_init"><code>assume_init</code></a>ã€<a href="union.MaybeUninit.html#method.assume_init_drop"><code>assume_init_drop</code></a> æˆ–ç±»ä¼¼å¯¹è±¡ï¼Œåˆ™ä¸ä¼šä¸ºå†…éƒ¨æ•°æ®è¿è¡Œææ„å‡½æ•°ã€‚
æ¥æ”¶è¿™ä¸ªå‡½æ•°è¿”å›çš„é™„å±å¼•ç”¨å¼•ç”¨çš„ä»£ç éœ€è¦è®°ä½è¿™ä¸€ç‚¹ã€‚
Rust çš„å®‰å…¨æ¨¡å‹è®¤ä¸ºæ³„æ¼æ˜¯å®‰å…¨çš„ï¼Œä½†å®ƒä»¬é€šå¸¸ä»ç„¶æ˜¯ä¸å¯å–çš„ã€‚
è¯è™½è¿™ä¹ˆè¯´ï¼Œä½†å€Ÿç”¨å¼•ç”¨ä¸å…¶ä»–ä»»ä½•ä¸€ä¸ªå€Ÿç”¨å¼•ç”¨ä¸€æ ·ï¼Œå› æ­¤ä¸ºå…¶èµ‹äºˆæ–°çš„å€¼å°†æ‘’å¼ƒæ—§çš„å†…å®¹ã€‚</p>
<h1 id="examples-2" class="section-header"><a href="#examples-2">Examples</a></h1>
<p>æ­£ç¡®ä½¿ç”¨æ­¤æ–¹æ³•:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">std::mem::MaybeUninit</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">x</span> <span class="op">=</span> <span class="ident">MaybeUninit</span>::<span class="op">&lt;</span><span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">u8</span><span class="op">&gt;</span><span class="op">&gt;</span><span class="ident">::uninit</span>();

{
    <span class="kw">let</span> <span class="ident">hello</span> <span class="op">=</span> <span class="ident">x</span>.<span class="ident">write</span>((<span class="kw-2">&amp;</span><span class="string">b&quot;Hello, world!&quot;</span>).<span class="ident">to_vec</span>());
    <span class="comment">// è®¾ç½® hello ä¸ä¼šé¢„å…ˆåˆ†é…ï¼Œä½†ä¸ä¼šæ³„æ¼å®ƒä»¬</span>
    <span class="kw-2">*</span><span class="ident">hello</span> <span class="op">=</span> (<span class="kw-2">&amp;</span><span class="string">b&quot;Hello&quot;</span>).<span class="ident">to_vec</span>();
    <span class="ident">hello</span>[<span class="number">0</span>] <span class="op">=</span> <span class="string">&#39;h&#39;</span> <span class="kw">as</span> <span class="ident">u8</span>;
}
<span class="comment">// x ç°åœ¨åˆå§‹åŒ–:</span>
<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">x</span>.<span class="ident">assume_init</span>() };
<span class="macro">assert_eq!</span>(<span class="string">b&quot;hello&quot;</span>, <span class="ident">s</span>.<span class="ident">as_slice</span>());</pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3AMaybeUninit%3B%0A%0Alet%20mut%20x%20%3D%20MaybeUninit%3A%3A%3CVec%3Cu8%3E%3E%3A%3Auninit()%3B%0A%0A%7B%0A%20%20%20%20let%20hello%20%3D%20x.write((%26b%22Hello%2C%20world!%22).to_vec())%3B%0A%20%20%20%20%2F%2F%20%E8%AE%BE%E7%BD%AE%20hello%20%E4%B8%8D%E4%BC%9A%E9%A2%84%E5%85%88%E5%88%86%E9%85%8D%EF%BC%8C%E4%BD%86%E4%B8%8D%E4%BC%9A%E6%B3%84%E6%BC%8F%E5%AE%83%E4%BB%AC%0A%20%20%20%20*hello%20%3D%20(%26b%22Hello%22).to_vec()%3B%0A%20%20%20%20hello%5B0%5D%20%3D%20'h'%20as%20u8%3B%0A%7D%0A%2F%2F%20x%20%E7%8E%B0%E5%9C%A8%E5%88%9D%E5%A7%8B%E5%8C%96%3A%0Alet%20s%20%3D%20unsafe%20%7B%20x.assume_init()%20%7D%3B%0Aassert_eq!(b%22hello%22%2C%20s.as_slice())%3B%0A%7D&amp;edition=2018">Run</a></div>
<p>è¯¥æ–¹æ³•çš„è¿™ç§ç”¨æ³•ä¼šå¯¼è‡´æ³„æ¼:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">std::mem::MaybeUninit</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">x</span> <span class="op">=</span> <span class="ident">MaybeUninit</span>::<span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span><span class="ident">::uninit</span>();

<span class="ident">x</span>.<span class="ident">write</span>(<span class="string">&quot;Hello&quot;</span>.<span class="ident">to_string</span>());
<span class="comment">// è¿™ä¼šæ³„æ¼åŒ…å«çš„å­—ç¬¦ä¸²:</span>
<span class="ident">x</span>.<span class="ident">write</span>(<span class="string">&quot;hello&quot;</span>.<span class="ident">to_string</span>());
<span class="comment">// x ç°åœ¨åˆå§‹åŒ–:</span>
<span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">x</span>.<span class="ident">assume_init</span>() };</pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3AMaybeUninit%3B%0A%0Alet%20mut%20x%20%3D%20MaybeUninit%3A%3A%3CString%3E%3A%3Auninit()%3B%0A%0Ax.write(%22Hello%22.to_string())%3B%0A%2F%2F%20%E8%BF%99%E4%BC%9A%E6%B3%84%E6%BC%8F%E5%8C%85%E5%90%AB%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%3A%0Ax.write(%22hello%22.to_string())%3B%0A%2F%2F%20x%20%E7%8E%B0%E5%9C%A8%E5%88%9D%E5%A7%8B%E5%8C%96%3A%0Alet%20s%20%3D%20unsafe%20%7B%20x.assume_init()%20%7D%3B%0A%7D&amp;edition=2018">Run</a></div>
<p>è¿™ç§æ–¹æ³•å¯ä»¥ç”¨æ¥é¿å…åœ¨æŸäº›æƒ…å†µä¸‹ä¸å®‰å…¨ã€‚ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†ä¸€ä¸ªå›ºå®šå¤§å°çš„ arena å®ç°çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒæä¾›äº†å›ºå®šçš„å¼•ç”¨ã€‚
æœ‰äº† <code>write</code>ï¼Œæˆ‘ä»¬å°±å¯ä»¥é¿å…é€šè¿‡è£¸æŒ‡é’ˆè·¯å¾„æ¥å†™:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="attribute">#![<span class="ident">feature</span>(<span class="ident">maybe_uninit_extra</span>)]</span>
<span class="kw">use</span> <span class="ident">core::pin::Pin</span>;
<span class="kw">use</span> <span class="ident">core::mem::MaybeUninit</span>;

<span class="kw">struct</span> <span class="ident">PinArena</span><span class="op">&lt;</span><span class="ident">T</span><span class="op">&gt;</span> {
    <span class="ident">memory</span>: <span class="ident">Box</span><span class="op">&lt;</span>[<span class="ident">MaybeUninit</span><span class="op">&lt;</span><span class="ident">T</span><span class="op">&gt;</span>]<span class="op">&gt;</span>,
    <span class="ident">len</span>: <span class="ident">usize</span>,
}

<span class="kw">impl</span> <span class="op">&lt;</span><span class="ident">T</span><span class="op">&gt;</span> <span class="ident">PinArena</span><span class="op">&lt;</span><span class="ident">T</span><span class="op">&gt;</span> {
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">capacity</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">usize</span> {
        <span class="self">self</span>.<span class="ident">memory</span>.<span class="ident">len</span>()
    }
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">push</span>(<span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="self">self</span>, <span class="ident">val</span>: <span class="ident">T</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">Pin</span><span class="op">&lt;</span><span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">T</span><span class="op">&gt;</span> {
        <span class="kw">if</span> <span class="self">self</span>.<span class="ident">len</span> <span class="op">&gt;</span><span class="op">=</span> <span class="self">self</span>.<span class="ident">capacity</span>() {
            <span class="macro">panic!</span>(<span class="string">&quot;Attempted to push to a full pin arena!&quot;</span>);
        }
        <span class="kw">let</span> <span class="ident">ref_</span> <span class="op">=</span> <span class="self">self</span>.<span class="ident">memory</span>[<span class="self">self</span>.<span class="ident">len</span>].<span class="ident">write</span>(<span class="ident">val</span>);
        <span class="self">self</span>.<span class="ident">len</span> <span class="op">+</span><span class="op">=</span> <span class="number">1</span>;
        <span class="kw">unsafe</span> { <span class="ident">Pin::new_unchecked</span>(<span class="ident">ref_</span>) }
    }
}</pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(maybe_uninit_extra)%5D%0Aextern%20crate%20r%23core%3B%0Afn%20main()%20%7B%0Ause%20core%3A%3Apin%3A%3APin%3B%0Ause%20core%3A%3Amem%3A%3AMaybeUninit%3B%0A%0Astruct%20PinArena%3CT%3E%20%7B%0A%20%20%20%20memory%3A%20Box%3C%5BMaybeUninit%3CT%3E%5D%3E%2C%0A%20%20%20%20len%3A%20usize%2C%0A%7D%0A%0Aimpl%20%3CT%3E%20PinArena%3CT%3E%20%7B%0A%20%20%20%20pub%20fn%20capacity(%26self)%20-%3E%20usize%20%7B%0A%20%20%20%20%20%20%20%20self.memory.len()%0A%20%20%20%20%7D%0A%20%20%20%20pub%20fn%20push(%26mut%20self%2C%20val%3A%20T)%20-%3E%20Pin%3C%26mut%20T%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20self.len%20%3E%3D%20self.capacity()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20panic!(%22Attempted%20to%20push%20to%20a%20full%20pin%20arena!%22)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20let%20ref_%20%3D%20self.memory%5Bself.len%5D.write(val)%3B%0A%20%20%20%20%20%20%20%20self.len%20%2B%3D%201%3B%0A%20%20%20%20%20%20%20%20unsafe%20%7B%20Pin%3A%3Anew_unchecked(ref_)%20%7D%0A%20%20%20%20%7D%0A%7D%0A%7D&amp;version=nightly&amp;edition=2018">Run</a></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.as_ptr" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.as_ptr" class="fnname">as_ptr</a>(&amp;self) -&gt; *const T</h4><a href="#method.as_ptr" class="anchor"></a><a class="srclink" href="../../src/core/mem/maybe_uninit.rs.html#530-533" title="goto source code">[src]</a></div></summary><div class="docblock"><p>è·å–æŒ‡å‘åŒ…å«å€¼çš„æŒ‡é’ˆã€‚
é™¤éåˆå§‹åŒ– <code>MaybeUninit&lt;T&gt;</code>ï¼Œå¦åˆ™ä»è¯¥æŒ‡é’ˆè¯»å–æˆ–å°†å…¶è½¬æ¢ä¸º quot æ˜¯æœªå®šä¹‰çš„è¡Œä¸ºã€‚
å†™å…¥è¯¥æŒ‡é’ˆ (non-transitively) æŒ‡å‘çš„å†…å­˜æ˜¯æœªå®šä¹‰çš„è¡Œä¸º (<code>UnsafeCell&lt;T&gt;</code> å†…éƒ¨é™¤å¤–)ã€‚</p>
<h1 id="examples-3" class="section-header"><a href="#examples-3">Examples</a></h1>
<p>æ­£ç¡®ä½¿ç”¨æ­¤æ–¹æ³•:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">std::mem::MaybeUninit</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">x</span> <span class="op">=</span> <span class="ident">MaybeUninit</span>::<span class="op">&lt;</span><span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">u32</span><span class="op">&gt;</span><span class="op">&gt;</span><span class="ident">::uninit</span>();
<span class="ident">x</span>.<span class="ident">write</span>(<span class="macro">vec!</span>[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]);
<span class="comment">// åœ¨ `MaybeUninit&lt;T&gt;` ä¸­åˆ›å»ºå¼•ç”¨ã€‚å¯ä»¥ï¼Œå› ä¸ºæˆ‘ä»¬å·²å°†å…¶åˆå§‹åŒ–ã€‚</span>
<span class="kw">let</span> <span class="ident">x_vec</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">x</span>.<span class="ident">as_ptr</span>() };
<span class="macro">assert_eq!</span>(<span class="ident">x_vec</span>.<span class="ident">len</span>(), <span class="number">3</span>);</pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3AMaybeUninit%3B%0A%0Alet%20mut%20x%20%3D%20MaybeUninit%3A%3A%3CVec%3Cu32%3E%3E%3A%3Auninit()%3B%0Ax.write(vec!%5B0%2C%201%2C%202%5D)%3B%0A%2F%2F%20%E5%9C%A8%20%60MaybeUninit%3CT%3E%60%20%E4%B8%AD%E5%88%9B%E5%BB%BA%E5%BC%95%E7%94%A8%E3%80%82%E5%8F%AF%E4%BB%A5%EF%BC%8C%E5%9B%A0%E4%B8%BA%E6%88%91%E4%BB%AC%E5%B7%B2%E5%B0%86%E5%85%B6%E5%88%9D%E5%A7%8B%E5%8C%96%E3%80%82%0Alet%20x_vec%20%3D%20unsafe%20%7B%20%26*x.as_ptr()%20%7D%3B%0Aassert_eq!(x_vec.len()%2C%203)%3B%0A%7D&amp;edition=2018">Run</a></div>
<p>è¿™ä¸ªæ–¹æ³•çš„é”™è¯¯ç”¨æ³•:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">std::mem::MaybeUninit</span>;

<span class="kw">let</span> <span class="ident">x</span> <span class="op">=</span> <span class="ident">MaybeUninit</span>::<span class="op">&lt;</span><span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">u32</span><span class="op">&gt;</span><span class="op">&gt;</span><span class="ident">::uninit</span>();
<span class="kw">let</span> <span class="ident">x_vec</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">x</span>.<span class="ident">as_ptr</span>() };
<span class="comment">// æˆ‘ä»¬åˆ›å»ºäº†å¯¹æœªåˆå§‹åŒ–çš„ vector çš„å¼•ç”¨! è¿™æ˜¯æœªå®šä¹‰çš„è¡Œä¸ºã€‚âš ï¸</span></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3AMaybeUninit%3B%0A%0Alet%20x%20%3D%20MaybeUninit%3A%3A%3CVec%3Cu32%3E%3E%3A%3Auninit()%3B%0Alet%20x_vec%20%3D%20unsafe%20%7B%20%26*x.as_ptr()%20%7D%3B%0A%2F%2F%20%E6%88%91%E4%BB%AC%E5%88%9B%E5%BB%BA%E4%BA%86%E5%AF%B9%E6%9C%AA%E5%88%9D%E5%A7%8B%E5%8C%96%E7%9A%84%20vector%20%E7%9A%84%E5%BC%95%E7%94%A8!%20%E8%BF%99%E6%98%AF%E6%9C%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E8%A1%8C%E4%B8%BA%E3%80%82%E2%9A%A0%EF%B8%8F%0A%7D&amp;edition=2018">Run</a></div>
<p>(è¯·æ³¨æ„ï¼Œå›´ç»•æœªåˆå§‹åŒ–æ•°æ®å¼•ç”¨çš„è§„åˆ™å°šæœªæœ€ç»ˆç¡®å®šï¼Œä½†æ˜¯é™¤éè¢«ç¡®å®šï¼Œå¦åˆ™å»ºè®®é¿å…ä½¿ç”¨å®ƒä»¬ã€‚)</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.as_mut_ptr" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.as_mut_ptr" class="fnname">as_mut_ptr</a>(&amp;mut self) -&gt; *mut T</h4><a href="#method.as_mut_ptr" class="anchor"></a><a class="srclink" href="../../src/core/mem/maybe_uninit.rs.html#569-572" title="goto source code">[src]</a></div></summary><div class="docblock"><p>è·å–æŒ‡å‘åŒ…å«å€¼çš„å¯å˜æŒ‡é’ˆã€‚
é™¤éåˆå§‹åŒ– <code>MaybeUninit&lt;T&gt;</code>ï¼Œå¦åˆ™ä»è¯¥æŒ‡é’ˆè¯»å–æˆ–å°†å…¶è½¬æ¢ä¸º quot æ˜¯æœªå®šä¹‰çš„è¡Œä¸ºã€‚</p>
<h1 id="examples-4" class="section-header"><a href="#examples-4">Examples</a></h1>
<p>æ­£ç¡®ä½¿ç”¨æ­¤æ–¹æ³•:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">std::mem::MaybeUninit</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">x</span> <span class="op">=</span> <span class="ident">MaybeUninit</span>::<span class="op">&lt;</span><span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">u32</span><span class="op">&gt;</span><span class="op">&gt;</span><span class="ident">::uninit</span>();
<span class="ident">x</span>.<span class="ident">write</span>(<span class="macro">vec!</span>[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]);
<span class="comment">// åœ¨ `MaybeUninit&lt;Vec&lt;u32&gt;&gt;` ä¸­åˆ›å»ºå¼•ç”¨ã€‚</span>
<span class="comment">// å¯ä»¥ï¼Œå› ä¸ºæˆ‘ä»¬å·²å°†å…¶åˆå§‹åŒ–ã€‚</span>
<span class="kw">let</span> <span class="ident">x_vec</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span><span class="ident">x</span>.<span class="ident">as_mut_ptr</span>() };
<span class="ident">x_vec</span>.<span class="ident">push</span>(<span class="number">3</span>);
<span class="macro">assert_eq!</span>(<span class="ident">x_vec</span>.<span class="ident">len</span>(), <span class="number">4</span>);</pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3AMaybeUninit%3B%0A%0Alet%20mut%20x%20%3D%20MaybeUninit%3A%3A%3CVec%3Cu32%3E%3E%3A%3Auninit()%3B%0Ax.write(vec!%5B0%2C%201%2C%202%5D)%3B%0A%2F%2F%20%E5%9C%A8%20%60MaybeUninit%3CVec%3Cu32%3E%3E%60%20%E4%B8%AD%E5%88%9B%E5%BB%BA%E5%BC%95%E7%94%A8%E3%80%82%0A%2F%2F%20%E5%8F%AF%E4%BB%A5%EF%BC%8C%E5%9B%A0%E4%B8%BA%E6%88%91%E4%BB%AC%E5%B7%B2%E5%B0%86%E5%85%B6%E5%88%9D%E5%A7%8B%E5%8C%96%E3%80%82%0Alet%20x_vec%20%3D%20unsafe%20%7B%20%26mut%20*x.as_mut_ptr()%20%7D%3B%0Ax_vec.push(3)%3B%0Aassert_eq!(x_vec.len()%2C%204)%3B%0A%7D&amp;edition=2018">Run</a></div>
<p>è¿™ä¸ªæ–¹æ³•çš„é”™è¯¯ç”¨æ³•:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">std::mem::MaybeUninit</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">x</span> <span class="op">=</span> <span class="ident">MaybeUninit</span>::<span class="op">&lt;</span><span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">u32</span><span class="op">&gt;</span><span class="op">&gt;</span><span class="ident">::uninit</span>();
<span class="kw">let</span> <span class="ident">x_vec</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span><span class="ident">x</span>.<span class="ident">as_mut_ptr</span>() };
<span class="comment">// æˆ‘ä»¬åˆ›å»ºäº†å¯¹æœªåˆå§‹åŒ–çš„ vector çš„å¼•ç”¨! è¿™æ˜¯æœªå®šä¹‰çš„è¡Œä¸ºã€‚âš ï¸</span></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3AMaybeUninit%3B%0A%0Alet%20mut%20x%20%3D%20MaybeUninit%3A%3A%3CVec%3Cu32%3E%3E%3A%3Auninit()%3B%0Alet%20x_vec%20%3D%20unsafe%20%7B%20%26mut%20*x.as_mut_ptr()%20%7D%3B%0A%2F%2F%20%E6%88%91%E4%BB%AC%E5%88%9B%E5%BB%BA%E4%BA%86%E5%AF%B9%E6%9C%AA%E5%88%9D%E5%A7%8B%E5%8C%96%E7%9A%84%20vector%20%E7%9A%84%E5%BC%95%E7%94%A8!%20%E8%BF%99%E6%98%AF%E6%9C%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E8%A1%8C%E4%B8%BA%E3%80%82%E2%9A%A0%EF%B8%8F%0A%7D&amp;edition=2018">Run</a></div>
<p>(è¯·æ³¨æ„ï¼Œå›´ç»•æœªåˆå§‹åŒ–æ•°æ®å¼•ç”¨çš„è§„åˆ™å°šæœªæœ€ç»ˆç¡®å®šï¼Œä½†æ˜¯é™¤éè¢«ç¡®å®šï¼Œå¦åˆ™å»ºè®®é¿å…ä½¿ç”¨å®ƒä»¬ã€‚)</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.assume_init" class="method has-srclink"><h4 class="code-header">pub unsafe fn <a href="#method.assume_init" class="fnname">assume_init</a>(self) -&gt; T</h4><a href="#method.assume_init" class="anchor"></a><a class="srclink" href="../../src/core/mem/maybe_uninit.rs.html#623-630" title="goto source code">[src]</a></div></summary><div class="docblock"><p>ä» <code>MaybeUninit&lt;T&gt;</code> å®¹å™¨ä¸­æå–å€¼ã€‚è¿™æ˜¯ç¡®ä¿æ•°æ®å°†è¢«ä¸¢å¼ƒçš„å¥½æ–¹æ³•ï¼Œå› ä¸ºç”Ÿæˆçš„ <code>T</code> å—åˆ°é€šå¸¸çš„ä¸¢å¼ƒå¤„ç†ã€‚</p>
<h1 id="safety" class="section-header"><a href="#safety">Safety</a></h1>
<p>å–å†³äºè°ƒç”¨æ–¹ï¼Œä»¥ç¡®ä¿ <code>MaybeUninit&lt;T&gt;</code> ç¡®å®å¤„äºåˆå§‹åŒ–çŠ¶æ€ã€‚åœ¨å†…å®¹å°šæœªå®Œå…¨åˆå§‹åŒ–æ—¶è°ƒç”¨æ­¤æ–¹æ³•ä¼šç«‹å³å¯¼è‡´æœªå®šä¹‰çš„è¡Œä¸ºã€‚
<a href="#initialization-invariant">ç±»å‹çº§æ–‡æ¡£</a> ä¸­åŒ…å«äº†æœ‰å…³æ­¤åˆå§‹åŒ–ä¸å¯å˜å˜é‡çš„æ›´å¤šä¿¡æ¯ã€‚</p>
<p>æœ€é‡è¦çš„æ˜¯ï¼Œè¯·è®°ä½ï¼Œå¤§å¤šæ•°ç±»å‹å…·æœ‰å…¶ä»–ä¸å˜å¼ï¼Œè€Œä¸ä»…ä»…æ˜¯åœ¨ç±»å‹çº§åˆ«è¢«åˆå§‹åŒ–ã€‚
ä¾‹å¦‚ï¼Œå°† <code>1</code> åˆå§‹åŒ–çš„ <a href="../../std/vec/struct.Vec.html"><code>Vec&lt;T&gt;</code></a> è§†ä¸ºå·²åˆå§‹åŒ– (åœ¨å½“å‰å®ç°ä¸‹; è¿™å¹¶ä¸æ„æˆç¨³å®šçš„ä¿è¯)ï¼Œå› ä¸ºç¼–è¯‘å™¨çŸ¥é“çš„å”¯ä¸€è¦æ±‚æ˜¯æ•°æ®æŒ‡é’ˆå¿…é¡»ä¸ºéç©ºå€¼ã€‚</p>
<p>åˆ›å»ºè¿™æ ·çš„ <code>Vec&lt;T&gt;</code> ä¸ä¼šç«‹å³å¯¼è‡´æœªå®šä¹‰çš„è¡Œä¸ºï¼Œä½†æ˜¯åœ¨å¤§å¤šæ•°å®‰å…¨æ“ä½œ (åŒ…æ‹¬ä¸¢å¼ƒæ“ä½œ) ä¸­éƒ½å°†å¯¼è‡´æœªå®šä¹‰çš„è¡Œä¸ºã€‚</p>
<h1 id="examples-5" class="section-header"><a href="#examples-5">Examples</a></h1>
<p>æ­£ç¡®ä½¿ç”¨æ­¤æ–¹æ³•:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">std::mem::MaybeUninit</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">x</span> <span class="op">=</span> <span class="ident">MaybeUninit</span>::<span class="op">&lt;</span><span class="ident">bool</span><span class="op">&gt;</span><span class="ident">::uninit</span>();
<span class="ident">x</span>.<span class="ident">write</span>(<span class="bool-val">true</span>);
<span class="kw">let</span> <span class="ident">x_init</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">x</span>.<span class="ident">assume_init</span>() };
<span class="macro">assert_eq!</span>(<span class="ident">x_init</span>, <span class="bool-val">true</span>);</pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3AMaybeUninit%3B%0A%0Alet%20mut%20x%20%3D%20MaybeUninit%3A%3A%3Cbool%3E%3A%3Auninit()%3B%0Ax.write(true)%3B%0Alet%20x_init%20%3D%20unsafe%20%7B%20x.assume_init()%20%7D%3B%0Aassert_eq!(x_init%2C%20true)%3B%0A%7D&amp;edition=2018">Run</a></div>
<p>è¿™ä¸ªæ–¹æ³•çš„é”™è¯¯ç”¨æ³•:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">std::mem::MaybeUninit</span>;

<span class="kw">let</span> <span class="ident">x</span> <span class="op">=</span> <span class="ident">MaybeUninit</span>::<span class="op">&lt;</span><span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">u32</span><span class="op">&gt;</span><span class="op">&gt;</span><span class="ident">::uninit</span>();
<span class="kw">let</span> <span class="ident">x_init</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">x</span>.<span class="ident">assume_init</span>() };
<span class="comment">// `x` å°šæœªåˆå§‹åŒ–ï¼Œå› æ­¤è¿™æœ€åä¸€è¡Œå¯¼è‡´æœªå®šä¹‰çš„è¡Œä¸ºã€‚âš ï¸</span></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3AMaybeUninit%3B%0A%0Alet%20x%20%3D%20MaybeUninit%3A%3A%3CVec%3Cu32%3E%3E%3A%3Auninit()%3B%0Alet%20x_init%20%3D%20unsafe%20%7B%20x.assume_init()%20%7D%3B%0A%2F%2F%20%60x%60%20%E5%B0%9A%E6%9C%AA%E5%88%9D%E5%A7%8B%E5%8C%96%EF%BC%8C%E5%9B%A0%E6%AD%A4%E8%BF%99%E6%9C%80%E5%90%8E%E4%B8%80%E8%A1%8C%E5%AF%BC%E8%87%B4%E6%9C%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E8%A1%8C%E4%B8%BA%E3%80%82%E2%9A%A0%EF%B8%8F%0A%7D&amp;edition=2018">Run</a></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.assume_init_read" class="method has-srclink"><h4 class="code-header">pub unsafe fn <a href="#method.assume_init_read" class="fnname">assume_init_read</a>(&amp;self) -&gt; T</h4><a href="#method.assume_init_read" class="anchor"></a><a class="srclink" href="../../src/core/mem/maybe_uninit.rs.html#694-701" title="goto source code">[src]</a></div><div class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span> This is a nightly-only experimental API. (<code>maybe_uninit_extra</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/63567">#63567</a>)</div></div></summary><div class="docblock"><p>ä» <code>MaybeUninit&lt;T&gt;</code> å®¹å™¨ä¸­è¯»å–å€¼ã€‚ç»“æœ <code>T</code> å—é€šå¸¸çš„ drop å¤„ç†å½±å“ã€‚</p>
<p>åªè¦æœ‰å¯èƒ½ï¼Œæœ€å¥½æ”¹ç”¨ <a href="union.MaybeUninit.html#method.assume_init"><code>assume_init</code></a>ï¼Œè¿™æ ·å¯ä»¥é˜²æ­¢é‡å¤ <code>MaybeUninit&lt;T&gt;</code> çš„å†…å®¹ã€‚</p>
<h1 id="safety-1" class="section-header"><a href="#safety-1">Safety</a></h1>
<p>å–å†³äºè°ƒç”¨æ–¹ï¼Œä»¥ç¡®ä¿ <code>MaybeUninit&lt;T&gt;</code> ç¡®å®å¤„äºåˆå§‹åŒ–çŠ¶æ€ã€‚åœ¨å†…å®¹å°šæœªå®Œå…¨åˆå§‹åŒ–æ—¶è°ƒç”¨æ­¤æ–¹æ³•ä¼šå¯¼è‡´æœªå®šä¹‰çš„è¡Œä¸ºã€‚
<a href="#initialization-invariant">ç±»å‹çº§æ–‡æ¡£</a> ä¸­åŒ…å«äº†æœ‰å…³æ­¤åˆå§‹åŒ–ä¸å¯å˜å˜é‡çš„æ›´å¤šä¿¡æ¯ã€‚</p>
<p>æ­¤å¤–ï¼Œç±»ä¼¼äº <a href="../ptr/fn.read.html" title="ptr::read"><code>ptr::read</code></a> å‡½æ•°ï¼Œè¯¥å‡½æ•°åˆ›å»ºå†…å®¹çš„æŒ‰ä½å‰¯æœ¬ï¼Œæ— è®ºæ‰€åŒ…å«çš„ç±»å‹æ˜¯å¦å®ç° <a href="../marker/trait.Copy.html" title="Copy"><code>Copy</code></a> traitã€‚
ä½¿ç”¨æ•°æ®çš„å¤šä¸ªå‰¯æœ¬æ—¶ (é€šè¿‡å¤šæ¬¡è°ƒç”¨ <code>assume_init_read</code>ï¼Œæˆ–å…ˆè°ƒç”¨ <code>assume_init_read</code>ï¼Œç„¶åå†è°ƒç”¨ <a href="union.MaybeUninit.html#method.assume_init"><code>assume_init</code></a>)ï¼Œæ‚¨æœ‰è´£ä»»ç¡®ä¿ç¡®å®å¯ä»¥å¤åˆ¶æ•°æ®ã€‚</p>
<h1 id="examples-6" class="section-header"><a href="#examples-6">Examples</a></h1>
<p>æ­£ç¡®ä½¿ç”¨æ­¤æ–¹æ³•:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="attribute">#![<span class="ident">feature</span>(<span class="ident">maybe_uninit_extra</span>)]</span>
<span class="kw">use</span> <span class="ident">std::mem::MaybeUninit</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">x</span> <span class="op">=</span> <span class="ident">MaybeUninit</span>::<span class="op">&lt;</span><span class="ident">u32</span><span class="op">&gt;</span><span class="ident">::uninit</span>();
<span class="ident">x</span>.<span class="ident">write</span>(<span class="number">13</span>);
<span class="kw">let</span> <span class="ident">x1</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">x</span>.<span class="ident">assume_init_read</span>() };
<span class="comment">// `u32` æ˜¯ `Copy`ï¼Œå› æ­¤æˆ‘ä»¬å¯èƒ½ä¼šå¤šæ¬¡è¯»å–ã€‚</span>
<span class="kw">let</span> <span class="ident">x2</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">x</span>.<span class="ident">assume_init_read</span>() };
<span class="macro">assert_eq!</span>(<span class="ident">x1</span>, <span class="ident">x2</span>);

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">x</span> <span class="op">=</span> <span class="ident">MaybeUninit</span>::<span class="op">&lt;</span><span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">u32</span><span class="op">&gt;</span><span class="op">&gt;</span><span class="op">&gt;</span><span class="ident">::uninit</span>();
<span class="ident">x</span>.<span class="ident">write</span>(<span class="prelude-val">None</span>);
<span class="kw">let</span> <span class="ident">x1</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">x</span>.<span class="ident">assume_init_read</span>() };
<span class="comment">// å¤åˆ¶ `None` å€¼æ˜¯å¯ä»¥çš„ï¼Œå› æ­¤æˆ‘ä»¬å¯èƒ½ä¼šå¤šæ¬¡è¯»å–ã€‚</span>
<span class="kw">let</span> <span class="ident">x2</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">x</span>.<span class="ident">assume_init_read</span>() };
<span class="macro">assert_eq!</span>(<span class="ident">x1</span>, <span class="ident">x2</span>);</pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(maybe_uninit_extra)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3AMaybeUninit%3B%0A%0Alet%20mut%20x%20%3D%20MaybeUninit%3A%3A%3Cu32%3E%3A%3Auninit()%3B%0Ax.write(13)%3B%0Alet%20x1%20%3D%20unsafe%20%7B%20x.assume_init_read()%20%7D%3B%0A%2F%2F%20%60u32%60%20%E6%98%AF%20%60Copy%60%EF%BC%8C%E5%9B%A0%E6%AD%A4%E6%88%91%E4%BB%AC%E5%8F%AF%E8%83%BD%E4%BC%9A%E5%A4%9A%E6%AC%A1%E8%AF%BB%E5%8F%96%E3%80%82%0Alet%20x2%20%3D%20unsafe%20%7B%20x.assume_init_read()%20%7D%3B%0Aassert_eq!(x1%2C%20x2)%3B%0A%0Alet%20mut%20x%20%3D%20MaybeUninit%3A%3A%3COption%3CVec%3Cu32%3E%3E%3E%3A%3Auninit()%3B%0Ax.write(None)%3B%0Alet%20x1%20%3D%20unsafe%20%7B%20x.assume_init_read()%20%7D%3B%0A%2F%2F%20%E5%A4%8D%E5%88%B6%20%60None%60%20%E5%80%BC%E6%98%AF%E5%8F%AF%E4%BB%A5%E7%9A%84%EF%BC%8C%E5%9B%A0%E6%AD%A4%E6%88%91%E4%BB%AC%E5%8F%AF%E8%83%BD%E4%BC%9A%E5%A4%9A%E6%AC%A1%E8%AF%BB%E5%8F%96%E3%80%82%0Alet%20x2%20%3D%20unsafe%20%7B%20x.assume_init_read()%20%7D%3B%0Aassert_eq!(x1%2C%20x2)%3B%0A%7D&amp;version=nightly&amp;edition=2018">Run</a></div>
<p>è¿™ä¸ªæ–¹æ³•çš„é”™è¯¯ç”¨æ³•:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="attribute">#![<span class="ident">feature</span>(<span class="ident">maybe_uninit_extra</span>)]</span>
<span class="kw">use</span> <span class="ident">std::mem::MaybeUninit</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">x</span> <span class="op">=</span> <span class="ident">MaybeUninit</span>::<span class="op">&lt;</span><span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">u32</span><span class="op">&gt;</span><span class="op">&gt;</span><span class="op">&gt;</span><span class="ident">::uninit</span>();
<span class="ident">x</span>.<span class="ident">write</span>(<span class="prelude-val">Some</span>(<span class="macro">vec!</span>[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]));
<span class="kw">let</span> <span class="ident">x1</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">x</span>.<span class="ident">assume_init_read</span>() };
<span class="kw">let</span> <span class="ident">x2</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">x</span>.<span class="ident">assume_init_read</span>() };
<span class="comment">// ç°åœ¨ï¼Œæˆ‘ä»¬åˆ›å»ºäº†åŒä¸€ vector çš„ä¸¤ä¸ªå‰¯æœ¬ï¼Œå½“å®ƒä»¬éƒ½è¢«ä¸¢å¼ƒæ—¶ï¼Œå°†å¯¼è‡´åŒé‡é‡Šæ”¾!</span></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(maybe_uninit_extra)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3AMaybeUninit%3B%0A%0Alet%20mut%20x%20%3D%20MaybeUninit%3A%3A%3COption%3CVec%3Cu32%3E%3E%3E%3A%3Auninit()%3B%0Ax.write(Some(vec!%5B0%2C%201%2C%202%5D))%3B%0Alet%20x1%20%3D%20unsafe%20%7B%20x.assume_init_read()%20%7D%3B%0Alet%20x2%20%3D%20unsafe%20%7B%20x.assume_init_read()%20%7D%3B%0A%2F%2F%20%E7%8E%B0%E5%9C%A8%EF%BC%8C%E6%88%91%E4%BB%AC%E5%88%9B%E5%BB%BA%E4%BA%86%E5%90%8C%E4%B8%80%20vector%20%E7%9A%84%E4%B8%A4%E4%B8%AA%E5%89%AF%E6%9C%AC%EF%BC%8C%E5%BD%93%E5%AE%83%E4%BB%AC%E9%83%BD%E8%A2%AB%E4%B8%A2%E5%BC%83%E6%97%B6%EF%BC%8C%E5%B0%86%E5%AF%BC%E8%87%B4%E5%8F%8C%E9%87%8D%E9%87%8A%E6%94%BE!%0A%7D&amp;version=nightly&amp;edition=2018">Run</a></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.assume_init_drop" class="method has-srclink"><h4 class="code-header">pub unsafe fn <a href="#method.assume_init_drop" class="fnname">assume_init_drop</a>(&amp;mut self)</h4><a href="#method.assume_init_drop" class="anchor"></a><a class="srclink" href="../../src/core/mem/maybe_uninit.rs.html#726-731" title="goto source code">[src]</a></div><div class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span> This is a nightly-only experimental API. (<code>maybe_uninit_extra</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/63567">#63567</a>)</div></div></summary><div class="docblock"><p>å°†åŒ…å«çš„å€¼æ”¾ç½®åˆ°ä½ã€‚</p>
<p>å¦‚æœæ‚¨æ‹¥æœ‰ <code>MaybeUninit</code>ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ <a href="union.MaybeUninit.html#method.assume_init"><code>assume_init</code></a> ä½œä¸ºæ›¿ä»£ã€‚</p>
<h1 id="safety-2" class="section-header"><a href="#safety-2">Safety</a></h1>
<p>å–å†³äºè°ƒç”¨æ–¹ï¼Œä»¥ç¡®ä¿ <code>MaybeUninit&lt;T&gt;</code> ç¡®å®å¤„äºåˆå§‹åŒ–çŠ¶æ€ã€‚
åœ¨å†…å®¹å°šæœªå®Œå…¨åˆå§‹åŒ–æ—¶è°ƒç”¨æ­¤æ–¹æ³•ä¼šå¯¼è‡´æœªå®šä¹‰çš„è¡Œä¸ºã€‚</p>
<p>æœ€é‡è¦çš„æ˜¯ï¼Œå¿…é¡»æ»¡è¶³ç±»å‹ <code>T</code> çš„æ‰€æœ‰å…¶ä»–ä¸å¯å˜å˜é‡ï¼Œå› ä¸º <code>T</code> (æˆ–å…¶æˆå‘˜) çš„ <code>Drop</code> å®ç°å¯èƒ½ä¾èµ–äºæ­¤ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå°† <a href="../../std/vec/struct.Vec.html"><code>Vec&lt;T&gt;</code></a> è®¾ç½®ä¸ºæ— æ•ˆä½†éç©ºçš„åœ°å€ä½¿å…¶åˆå§‹åŒ– (åœ¨å½“å‰å®ç°ä¸‹;
è¿™å¹¶ä¸æ„æˆç¨³å®šçš„ä¿è¯)ï¼Œå› ä¸ºç¼–è¯‘å™¨çŸ¥é“çš„å”¯ä¸€è¦æ±‚æ˜¯æ•°æ®æŒ‡é’ˆå¿…é¡»éç©ºã€‚
ä½†æ˜¯ï¼Œä¸¢å¼ƒè¿™æ ·çš„ <code>Vec&lt;T&gt;</code> ä¼šå¯¼è‡´ä¸ç¡®å®šçš„è¡Œä¸ºã€‚</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.assume_init_ref" class="method has-srclink"><h4 class="code-header">pub unsafe fn <a href="#method.assume_init_ref" class="fnname">assume_init_ref</a>(&amp;self) -&gt; &amp;T</h4><span class="since" title="Stable since Rust version 1.55.0">1.55.0</span><a href="#method.assume_init_ref" class="anchor"></a><a class="srclink" href="../../src/core/mem/maybe_uninit.rs.html#788-795" title="goto source code">[src]</a></div></summary><div class="docblock"><p>è·å–å¯¹åŒ…å«å€¼çš„å…±äº«å¼•ç”¨ã€‚</p>
<p>å½“æˆ‘ä»¬è¦è®¿é—®å·²åˆå§‹åŒ–ä½†æ²¡æœ‰ <code>MaybeUninit</code> æ‰€æœ‰æƒ (é˜²æ­¢ä½¿ç”¨ <code>.assume_init()</code>) çš„ <code>MaybeUninit</code> æ—¶ï¼Œè¿™å¾ˆæœ‰ç”¨ã€‚</p>
<h1 id="safety-3" class="section-header"><a href="#safety-3">Safety</a></h1>
<p>åœ¨å†…å®¹å°šæœªå®Œå…¨åˆå§‹åŒ–æ—¶è°ƒç”¨æ­¤æ–¹æ³•ä¼šå¯¼è‡´æœªå®šä¹‰çš„è¡Œä¸º: å–å†³äºè°ƒç”¨æ–¹ï¼Œä»¥ç¡®ä¿ <code>MaybeUninit&lt;T&gt;</code> ç¡®å®å¤„äºåˆå§‹åŒ–çŠ¶æ€ã€‚</p>
<h1 id="examples-7" class="section-header"><a href="#examples-7">Examples</a></h1><h3 id="æ­£ç¡®ä½¿ç”¨æ­¤æ–¹æ³•" class="section-header"><a href="#æ­£ç¡®ä½¿ç”¨æ­¤æ–¹æ³•">æ­£ç¡®ä½¿ç”¨æ­¤æ–¹æ³•:</a></h3>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">std::mem::MaybeUninit</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">x</span> <span class="op">=</span> <span class="ident">MaybeUninit</span>::<span class="op">&lt;</span><span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">u32</span><span class="op">&gt;</span><span class="op">&gt;</span><span class="ident">::uninit</span>();
<span class="comment">// åˆå§‹åŒ– `x`:</span>
<span class="ident">x</span>.<span class="ident">write</span>(<span class="macro">vec!</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);
<span class="comment">// ç°åœ¨å·²çŸ¥æˆ‘ä»¬çš„ `MaybeUninit&lt;_&gt;` å·²åˆå§‹åŒ–ï¼Œå¯ä»¥åˆ›å»ºå¯¹å…¶çš„å…±äº«å¼•ç”¨:</span>
<span class="kw">let</span> <span class="ident">x</span>: <span class="kw-2">&amp;</span><span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">u32</span><span class="op">&gt;</span> <span class="op">=</span> <span class="kw">unsafe</span> {
    <span class="comment">// SAFETY: `x` å·²åˆå§‹åŒ–ã€‚</span>
    <span class="ident">x</span>.<span class="ident">assume_init_ref</span>()
};
<span class="macro">assert_eq!</span>(<span class="ident">x</span>, <span class="kw-2">&amp;</span><span class="macro">vec!</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3AMaybeUninit%3B%0A%0Alet%20mut%20x%20%3D%20MaybeUninit%3A%3A%3CVec%3Cu32%3E%3E%3A%3Auninit()%3B%0A%2F%2F%20%E5%88%9D%E5%A7%8B%E5%8C%96%20%60x%60%3A%0Ax.write(vec!%5B1%2C%202%2C%203%5D)%3B%0A%2F%2F%20%E7%8E%B0%E5%9C%A8%E5%B7%B2%E7%9F%A5%E6%88%91%E4%BB%AC%E7%9A%84%20%60MaybeUninit%3C_%3E%60%20%E5%B7%B2%E5%88%9D%E5%A7%8B%E5%8C%96%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%88%9B%E5%BB%BA%E5%AF%B9%E5%85%B6%E7%9A%84%E5%85%B1%E4%BA%AB%E5%BC%95%E7%94%A8%3A%0Alet%20x%3A%20%26Vec%3Cu32%3E%20%3D%20unsafe%20%7B%0A%20%20%20%20%2F%2F%20SAFETY%3A%20%60x%60%20%E5%B7%B2%E5%88%9D%E5%A7%8B%E5%8C%96%E3%80%82%0A%20%20%20%20x.assume_init_ref()%0A%7D%3B%0Aassert_eq!(x%2C%20%26vec!%5B1%2C%202%2C%203%5D)%3B%0A%7D&amp;edition=2018">Run</a></div>
<h3 id="è¿™ä¸ªæ–¹æ³•çš„é”™è¯¯ç”¨æ³•" class="section-header"><a href="#è¿™ä¸ªæ–¹æ³•çš„é”™è¯¯ç”¨æ³•">è¿™ä¸ªæ–¹æ³•çš„é”™è¯¯ç”¨æ³•:</a></h3>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">std::mem::MaybeUninit</span>;

<span class="kw">let</span> <span class="ident">x</span> <span class="op">=</span> <span class="ident">MaybeUninit</span>::<span class="op">&lt;</span><span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">u32</span><span class="op">&gt;</span><span class="op">&gt;</span><span class="ident">::uninit</span>();
<span class="kw">let</span> <span class="ident">x_vec</span>: <span class="kw-2">&amp;</span><span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">u32</span><span class="op">&gt;</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">x</span>.<span class="ident">assume_init_ref</span>() };
<span class="comment">// æˆ‘ä»¬åˆ›å»ºäº†å¯¹æœªåˆå§‹åŒ–çš„ vector çš„å¼•ç”¨! è¿™æ˜¯æœªå®šä¹‰çš„è¡Œä¸ºã€‚âš ï¸</span></pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3AMaybeUninit%3B%0A%0Alet%20x%20%3D%20MaybeUninit%3A%3A%3CVec%3Cu32%3E%3E%3A%3Auninit()%3B%0Alet%20x_vec%3A%20%26Vec%3Cu32%3E%20%3D%20unsafe%20%7B%20x.assume_init_ref()%20%7D%3B%0A%2F%2F%20%E6%88%91%E4%BB%AC%E5%88%9B%E5%BB%BA%E4%BA%86%E5%AF%B9%E6%9C%AA%E5%88%9D%E5%A7%8B%E5%8C%96%E7%9A%84%20vector%20%E7%9A%84%E5%BC%95%E7%94%A8!%20%E8%BF%99%E6%98%AF%E6%9C%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E8%A1%8C%E4%B8%BA%E3%80%82%E2%9A%A0%EF%B8%8F%0A%7D&amp;edition=2018">Run</a></div>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">std</span>::{<span class="ident">cell::Cell</span>, <span class="ident">mem::MaybeUninit</span>};

<span class="kw">let</span> <span class="ident">b</span> <span class="op">=</span> <span class="ident">MaybeUninit</span>::<span class="op">&lt;</span><span class="ident">Cell</span><span class="op">&lt;</span><span class="ident">bool</span><span class="op">&gt;</span><span class="op">&gt;</span><span class="ident">::uninit</span>();
<span class="comment">// ä½¿ç”¨ `Cell::set` åˆå§‹åŒ– `MaybeUninit`:</span>
<span class="kw">unsafe</span> {
    <span class="ident">b</span>.<span class="ident">assume_init_ref</span>().<span class="ident">set</span>(<span class="bool-val">true</span>);
   <span class="comment">// ^^^^^^^^^^^^^^^</span>
   <span class="comment">// å¼•ç”¨æœªåˆå§‹åŒ–çš„ `Cell&lt;bool&gt;`: UB!</span>
}</pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3A%7Bcell%3A%3ACell%2C%20mem%3A%3AMaybeUninit%7D%3B%0A%0Alet%20b%20%3D%20MaybeUninit%3A%3A%3CCell%3Cbool%3E%3E%3A%3Auninit()%3B%0A%2F%2F%20%E4%BD%BF%E7%94%A8%20%60Cell%3A%3Aset%60%20%E5%88%9D%E5%A7%8B%E5%8C%96%20%60MaybeUninit%60%3A%0Aunsafe%20%7B%0A%20%20%20%20b.assume_init_ref().set(true)%3B%0A%20%20%20%2F%2F%20%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%0A%20%20%20%2F%2F%20%E5%BC%95%E7%94%A8%E6%9C%AA%E5%88%9D%E5%A7%8B%E5%8C%96%E7%9A%84%20%60Cell%3Cbool%3E%60%3A%20UB!%0A%7D%0A%7D&amp;edition=2018">Run</a></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.assume_init_mut" class="method has-srclink"><h4 class="code-header">pub unsafe fn <a href="#method.assume_init_mut" class="fnname">assume_init_mut</a>(&amp;mut self) -&gt; &amp;mut T</h4><span class="since" title="Stable since Rust version 1.55.0">1.55.0</span><a href="#method.assume_init_mut" class="anchor"></a><a class="srclink" href="../../src/core/mem/maybe_uninit.rs.html#904-911" title="goto source code">[src]</a></div></summary><div class="docblock"><p>è·å–æ‰€åŒ…å«å€¼çš„å¯å˜ (unique) å¼•ç”¨ã€‚</p>
<p>å½“æˆ‘ä»¬è¦è®¿é—®å·²åˆå§‹åŒ–ä½†æ²¡æœ‰ <code>MaybeUninit</code> æ‰€æœ‰æƒ (é˜²æ­¢ä½¿ç”¨ <code>.assume_init()</code>) çš„ <code>MaybeUninit</code> æ—¶ï¼Œè¿™å¾ˆæœ‰ç”¨ã€‚</p>
<h1 id="safety-4" class="section-header"><a href="#safety-4">Safety</a></h1>
<p>åœ¨å†…å®¹å°šæœªå®Œå…¨åˆå§‹åŒ–æ—¶è°ƒç”¨æ­¤æ–¹æ³•ä¼šå¯¼è‡´æœªå®šä¹‰çš„è¡Œä¸º: å–å†³äºè°ƒç”¨æ–¹ï¼Œä»¥ç¡®ä¿ <code>MaybeUninit&lt;T&gt;</code> ç¡®å®å¤„äºåˆå§‹åŒ–çŠ¶æ€ã€‚
ä¾‹å¦‚ï¼Œ<code>.assume_init_mut()</code> ä¸èƒ½ç”¨äºåˆå§‹åŒ– <code>MaybeUninit</code>ã€‚</p>
<h1 id="examples-8" class="section-header"><a href="#examples-8">Examples</a></h1><h3 id="æ­£ç¡®ä½¿ç”¨æ­¤æ–¹æ³•-1" class="section-header"><a href="#æ­£ç¡®ä½¿ç”¨æ­¤æ–¹æ³•-1">æ­£ç¡®ä½¿ç”¨æ­¤æ–¹æ³•:</a></h3>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">std::mem::MaybeUninit</span>;

<span class="kw">extern</span> <span class="string">&quot;C&quot;</span> {
    <span class="doccomment">/// åˆå§‹åŒ–æ‰€æœ‰è¾“å…¥ç¼“å†²åŒºçš„å­—èŠ‚ã€‚</span>
    <span class="kw">fn</span> <span class="ident">initialize_buffer</span>(<span class="ident">buf</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> [<span class="ident">u8</span>; <span class="number">1024</span>]);
}

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">buf</span> <span class="op">=</span> <span class="ident">MaybeUninit</span>::<span class="op">&lt;</span>[<span class="ident">u8</span>; <span class="number">1024</span>]<span class="op">&gt;</span><span class="ident">::uninit</span>();

<span class="comment">// åˆå§‹åŒ– `buf`:</span>
<span class="kw">unsafe</span> { <span class="ident">initialize_buffer</span>(<span class="ident">buf</span>.<span class="ident">as_mut_ptr</span>()); }
<span class="comment">// ç°åœ¨æˆ‘ä»¬çŸ¥é“ `buf` å·²è¢«åˆå§‹åŒ–ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å¯¹å…¶è¿›è¡Œ `.assume_init()`ã€‚</span>
<span class="comment">// ä½†æ˜¯ï¼Œä½¿ç”¨ `.assume_init()` å¯èƒ½ä¼šè§¦å‘ 1024 å­—èŠ‚çš„ `memcpy`ã€‚</span>
<span class="comment">// ä¸ºäº†æ–­è¨€æˆ‘ä»¬çš„ç¼“å†²åŒºå·²ç»åˆå§‹åŒ–è€Œä¸å¤åˆ¶å®ƒï¼Œæˆ‘ä»¬å°† `&amp;mut MaybeUninit&lt;[u8; 1024]&gt;` å‡çº§ä¸º `&amp;mut [u8; 1024]`:</span>
<span class="kw">let</span> <span class="ident">buf</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> [<span class="ident">u8</span>; <span class="number">1024</span>] <span class="op">=</span> <span class="kw">unsafe</span> {
    <span class="comment">// SAFETY: `buf` å·²åˆå§‹åŒ–ã€‚</span>
    <span class="ident">buf</span>.<span class="ident">assume_init_mut</span>()
};

<span class="comment">// ç°åœ¨æˆ‘ä»¬å¯ä»¥å°† `buf` ç”¨ä½œæ™®é€šåˆ‡ç‰‡:</span>
<span class="ident">buf</span>.<span class="ident">sort_unstable</span>();
<span class="macro">assert!</span>(
    <span class="ident">buf</span>.<span class="ident">windows</span>(<span class="number">2</span>).<span class="ident">all</span>(<span class="op">|</span><span class="ident">pair</span><span class="op">|</span> <span class="ident">pair</span>[<span class="number">0</span>] <span class="op">&lt;</span><span class="op">=</span> <span class="ident">pair</span>[<span class="number">1</span>]),
    <span class="string">&quot;buffer is sorted&quot;</span>,
);</pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3AMaybeUninit%3B%0A%0Aunsafe%20extern%20%22C%22%20fn%20initialize_buffer(buf%3A%20*mut%20%5Bu8%3B%201024%5D)%20%7B%20*buf%20%3D%20%5B0%3B%201024%5D%20%7D%0A%23%5Bcfg(FALSE)%5D%0Aextern%20%22C%22%20%7B%0A%20%20%20%20%2F%2F%2F%20%E5%88%9D%E5%A7%8B%E5%8C%96%E6%89%80%E6%9C%89%E8%BE%93%E5%85%A5%E7%BC%93%E5%86%B2%E5%8C%BA%E7%9A%84%E5%AD%97%E8%8A%82%E3%80%82%0A%20%20%20%20fn%20initialize_buffer(buf%3A%20*mut%20%5Bu8%3B%201024%5D)%3B%0A%7D%0A%0Alet%20mut%20buf%20%3D%20MaybeUninit%3A%3A%3C%5Bu8%3B%201024%5D%3E%3A%3Auninit()%3B%0A%0A%2F%2F%20%E5%88%9D%E5%A7%8B%E5%8C%96%20%60buf%60%3A%0Aunsafe%20%7B%20initialize_buffer(buf.as_mut_ptr())%3B%20%7D%0A%2F%2F%20%E7%8E%B0%E5%9C%A8%E6%88%91%E4%BB%AC%E7%9F%A5%E9%81%93%20%60buf%60%20%E5%B7%B2%E8%A2%AB%E5%88%9D%E5%A7%8B%E5%8C%96%EF%BC%8C%E5%9B%A0%E6%AD%A4%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E5%AF%B9%E5%85%B6%E8%BF%9B%E8%A1%8C%20%60.assume_init()%60%E3%80%82%0A%2F%2F%20%E4%BD%86%E6%98%AF%EF%BC%8C%E4%BD%BF%E7%94%A8%20%60.assume_init()%60%20%E5%8F%AF%E8%83%BD%E4%BC%9A%E8%A7%A6%E5%8F%91%201024%20%E5%AD%97%E8%8A%82%E7%9A%84%20%60memcpy%60%E3%80%82%0A%2F%2F%20%E4%B8%BA%E4%BA%86%E6%96%AD%E8%A8%80%E6%88%91%E4%BB%AC%E7%9A%84%E7%BC%93%E5%86%B2%E5%8C%BA%E5%B7%B2%E7%BB%8F%E5%88%9D%E5%A7%8B%E5%8C%96%E8%80%8C%E4%B8%8D%E5%A4%8D%E5%88%B6%E5%AE%83%EF%BC%8C%E6%88%91%E4%BB%AC%E5%B0%86%20%60%26mut%20MaybeUninit%3C%5Bu8%3B%201024%5D%3E%60%20%E5%8D%87%E7%BA%A7%E4%B8%BA%20%60%26mut%20%5Bu8%3B%201024%5D%60%3A%0Alet%20buf%3A%20%26mut%20%5Bu8%3B%201024%5D%20%3D%20unsafe%20%7B%0A%20%20%20%20%2F%2F%20SAFETY%3A%20%60buf%60%20%E5%B7%B2%E5%88%9D%E5%A7%8B%E5%8C%96%E3%80%82%0A%20%20%20%20buf.assume_init_mut()%0A%7D%3B%0A%0A%2F%2F%20%E7%8E%B0%E5%9C%A8%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E5%B0%86%20%60buf%60%20%E7%94%A8%E4%BD%9C%E6%99%AE%E9%80%9A%E5%88%87%E7%89%87%3A%0Abuf.sort_unstable()%3B%0Aassert!(%0A%20%20%20%20buf.windows(2).all(%7Cpair%7C%20pair%5B0%5D%20%3C%3D%20pair%5B1%5D)%2C%0A%20%20%20%20%22buffer%20is%20sorted%22%2C%0A)%3B%0A%7D&amp;edition=2018">Run</a></div>
<h3 id="è¿™ä¸ªæ–¹æ³•çš„é”™è¯¯ç”¨æ³•-1" class="section-header"><a href="#è¿™ä¸ªæ–¹æ³•çš„é”™è¯¯ç”¨æ³•-1">è¿™ä¸ªæ–¹æ³•çš„é”™è¯¯ç”¨æ³•:</a></h3>
<p>æ‚¨ä¸èƒ½ä½¿ç”¨ <code>.assume_init_mut()</code> åˆå§‹åŒ–å€¼:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">std::mem::MaybeUninit</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">b</span> <span class="op">=</span> <span class="ident">MaybeUninit</span>::<span class="op">&lt;</span><span class="ident">bool</span><span class="op">&gt;</span><span class="ident">::uninit</span>();
<span class="kw">unsafe</span> {
    <span class="kw-2">*</span><span class="ident">b</span>.<span class="ident">assume_init_mut</span>() <span class="op">=</span> <span class="bool-val">true</span>;
    <span class="comment">// æˆ‘ä»¬å·²ç»åˆ›å»ºäº† (mutable) å¼•ç”¨æœªåˆå§‹åŒ–çš„ `bool`!</span>
    <span class="comment">// è¿™æ˜¯æœªå®šä¹‰çš„è¡Œä¸ºã€‚âš ï¸</span>
}</pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3AMaybeUninit%3B%0A%0Alet%20mut%20b%20%3D%20MaybeUninit%3A%3A%3Cbool%3E%3A%3Auninit()%3B%0Aunsafe%20%7B%0A%20%20%20%20*b.assume_init_mut()%20%3D%20true%3B%0A%20%20%20%20%2F%2F%20%E6%88%91%E4%BB%AC%E5%B7%B2%E7%BB%8F%E5%88%9B%E5%BB%BA%E4%BA%86%20(mutable)%20%E5%BC%95%E7%94%A8%E6%9C%AA%E5%88%9D%E5%A7%8B%E5%8C%96%E7%9A%84%20%60bool%60!%0A%20%20%20%20%2F%2F%20%E8%BF%99%E6%98%AF%E6%9C%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E8%A1%8C%E4%B8%BA%E3%80%82%E2%9A%A0%EF%B8%8F%0A%7D%0A%7D&amp;edition=2018">Run</a></div>
<p>ä¾‹å¦‚ï¼Œæ‚¨ä¸èƒ½ <a href="https://doc.rust-lang.org/std/io/trait.Read.html"><code>Read</code></a> è¿›å…¥æœªåˆå§‹åŒ–çš„ç¼“å†²åŒº:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">std</span>::{<span class="ident">io</span>, <span class="ident">mem::MaybeUninit</span>};

<span class="kw">fn</span> <span class="ident">read_chunk</span> (<span class="ident">reader</span>: <span class="kw-2">&amp;</span><span class="lifetime">&#39;_</span> <span class="kw-2">mut</span> <span class="kw">dyn</span> <span class="ident">io::Read</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">io::Result</span><span class="op">&lt;</span>[<span class="ident">u8</span>; <span class="number">64</span>]<span class="op">&gt;</span>
{
    <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">buffer</span> <span class="op">=</span> <span class="ident">MaybeUninit</span>::<span class="op">&lt;</span>[<span class="ident">u8</span>; <span class="number">64</span>]<span class="op">&gt;</span><span class="ident">::uninit</span>();
    <span class="ident">reader</span>.<span class="ident">read_exact</span>(<span class="kw">unsafe</span> { <span class="ident">buffer</span>.<span class="ident">assume_init_mut</span>() })<span class="question-mark">?</span>;
                            <span class="comment">// ^^^^^^^^^^^^^^^^^^^^^^^^</span>
                            <span class="comment">// (mutable) å¼•ç”¨æœªåˆå§‹åŒ–çš„å†…å­˜!</span>
                            <span class="comment">// è¿™æ˜¯æœªå®šä¹‰çš„è¡Œä¸ºã€‚</span>
    <span class="prelude-val">Ok</span>(<span class="kw">unsafe</span> { <span class="ident">buffer</span>.<span class="ident">assume_init</span>() })
}</pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3A%7Bio%2C%20mem%3A%3AMaybeUninit%7D%3B%0A%0Afn%20read_chunk%20(reader%3A%20%26'_%20mut%20dyn%20io%3A%3ARead)%20-%3E%20io%3A%3AResult%3C%5Bu8%3B%2064%5D%3E%0A%7B%0A%20%20%20%20let%20mut%20buffer%20%3D%20MaybeUninit%3A%3A%3C%5Bu8%3B%2064%5D%3E%3A%3Auninit()%3B%0A%20%20%20%20reader.read_exact(unsafe%20%7B%20buffer.assume_init_mut()%20%7D)%3F%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20(mutable)%20%E5%BC%95%E7%94%A8%E6%9C%AA%E5%88%9D%E5%A7%8B%E5%8C%96%E7%9A%84%E5%86%85%E5%AD%98!%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E8%BF%99%E6%98%AF%E6%9C%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E8%A1%8C%E4%B8%BA%E3%80%82%0A%20%20%20%20Ok(unsafe%20%7B%20buffer.assume_init()%20%7D)%0A%7D%0A%7D&amp;edition=2018">Run</a></div>
<p>ä¹Ÿä¸èƒ½ä½¿ç”¨ç›´æ¥å­—æ®µè®¿é—®æ¥è¿›è¡Œé€å­—æ®µé€æ­¥åˆå§‹åŒ–:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">std</span>::{<span class="ident">mem::MaybeUninit</span>, <span class="ident">ptr</span>};

<span class="kw">struct</span> <span class="ident">Foo</span> {
    <span class="ident">a</span>: <span class="ident">u32</span>,
    <span class="ident">b</span>: <span class="ident">u8</span>,
}

<span class="kw">let</span> <span class="ident">foo</span>: <span class="ident">Foo</span> <span class="op">=</span> <span class="kw">unsafe</span> {
    <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">foo</span> <span class="op">=</span> <span class="ident">MaybeUninit</span>::<span class="op">&lt;</span><span class="ident">Foo</span><span class="op">&gt;</span><span class="ident">::uninit</span>();
    <span class="ident">ptr::write</span>(<span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">foo</span>.<span class="ident">assume_init_mut</span>().<span class="ident">a</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">u32</span>, <span class="number">1337</span>);
                 <span class="comment">// ^^^^^^^^^^^^^^^^^^^^^</span>
                 <span class="comment">// (mutable) å¼•ç”¨æœªåˆå§‹åŒ–çš„å†…å­˜!</span>
                 <span class="comment">// è¿™æ˜¯æœªå®šä¹‰çš„è¡Œä¸ºã€‚</span>
    <span class="ident">ptr::write</span>(<span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">foo</span>.<span class="ident">assume_init_mut</span>().<span class="ident">b</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">u8</span>, <span class="number">42</span>);
                 <span class="comment">// ^^^^^^^^^^^^^^^^^^^^^</span>
                 <span class="comment">// (mutable) å¼•ç”¨æœªåˆå§‹åŒ–çš„å†…å­˜!</span>
                 <span class="comment">// è¿™æ˜¯æœªå®šä¹‰çš„è¡Œä¸ºã€‚</span>
    <span class="ident">foo</span>.<span class="ident">assume_init</span>()
};</pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3A%7Bmem%3A%3AMaybeUninit%2C%20ptr%7D%3B%0A%0Astruct%20Foo%20%7B%0A%20%20%20%20a%3A%20u32%2C%0A%20%20%20%20b%3A%20u8%2C%0A%7D%0A%0Alet%20foo%3A%20Foo%20%3D%20unsafe%20%7B%0A%20%20%20%20let%20mut%20foo%20%3D%20MaybeUninit%3A%3A%3CFoo%3E%3A%3Auninit()%3B%0A%20%20%20%20ptr%3A%3Awrite(%26mut%20foo.assume_init_mut().a%20as%20*mut%20u32%2C%201337)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20(mutable)%20%E5%BC%95%E7%94%A8%E6%9C%AA%E5%88%9D%E5%A7%8B%E5%8C%96%E7%9A%84%E5%86%85%E5%AD%98!%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E8%BF%99%E6%98%AF%E6%9C%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E8%A1%8C%E4%B8%BA%E3%80%82%0A%20%20%20%20ptr%3A%3Awrite(%26mut%20foo.assume_init_mut().b%20as%20*mut%20u8%2C%2042)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%5E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20(mutable)%20%E5%BC%95%E7%94%A8%E6%9C%AA%E5%88%9D%E5%A7%8B%E5%8C%96%E7%9A%84%E5%86%85%E5%AD%98!%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E8%BF%99%E6%98%AF%E6%9C%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E8%A1%8C%E4%B8%BA%E3%80%82%0A%20%20%20%20foo.assume_init()%0A%7D%3B%0A%7D&amp;edition=2018">Run</a></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.array_assume_init" class="method has-srclink"><h4 class="code-header">pub unsafe fn <a href="#method.array_assume_init" class="fnname">array_assume_init</a>&lt;const N:&nbsp;usize&gt;(array: [Self; N]) -&gt; [T; N]</h4><a href="#method.array_assume_init" class="anchor"></a><a class="srclink" href="../../src/core/mem/maybe_uninit.rs.html#941-951" title="goto source code">[src]</a></div><div class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span> This is a nightly-only experimental API. (<code>maybe_uninit_array_assume_init</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/80908">#80908</a>)</div></div></summary><div class="docblock"><p>ä» <code>MaybeUninit</code> å®¹å™¨æ•°ç»„ä¸­æå–å€¼ã€‚</p>
<h1 id="safety-5" class="section-header"><a href="#safety-5">Safety</a></h1>
<p>è°ƒç”¨æ–¹æœ‰è´£ä»»ä¿è¯æ•°ç»„çš„æ‰€æœ‰å…ƒç´ éƒ½å¤„äºåˆå§‹åŒ–çŠ¶æ€ã€‚</p>
<h1 id="examples-9" class="section-header"><a href="#examples-9">Examples</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="attribute">#![<span class="ident">feature</span>(<span class="ident">maybe_uninit_uninit_array</span>)]</span>
<span class="attribute">#![<span class="ident">feature</span>(<span class="ident">maybe_uninit_array_assume_init</span>)]</span>
<span class="kw">use</span> <span class="ident">std::mem::MaybeUninit</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">array</span>: [<span class="ident">MaybeUninit</span><span class="op">&lt;</span><span class="ident">i32</span><span class="op">&gt;</span>; <span class="number">3</span>] <span class="op">=</span> <span class="ident">MaybeUninit::uninit_array</span>();
<span class="ident">array</span>[<span class="number">0</span>].<span class="ident">write</span>(<span class="number">0</span>);
<span class="ident">array</span>[<span class="number">1</span>].<span class="ident">write</span>(<span class="number">1</span>);
<span class="ident">array</span>[<span class="number">2</span>].<span class="ident">write</span>(<span class="number">2</span>);

<span class="comment">// SAFETY: ç°åœ¨å®‰å…¨äº†ï¼Œå› ä¸ºæˆ‘ä»¬åˆå§‹åŒ–äº†æ‰€æœ‰å…ƒç´ </span>
<span class="kw">let</span> <span class="ident">array</span> <span class="op">=</span> <span class="kw">unsafe</span> {
    <span class="ident">MaybeUninit::array_assume_init</span>(<span class="ident">array</span>)
};

<span class="macro">assert_eq!</span>(<span class="ident">array</span>, [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]);</pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(maybe_uninit_uninit_array)%5D%0A%23!%5Bfeature(maybe_uninit_array_assume_init)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3AMaybeUninit%3B%0A%0Alet%20mut%20array%3A%20%5BMaybeUninit%3Ci32%3E%3B%203%5D%20%3D%20MaybeUninit%3A%3Auninit_array()%3B%0Aarray%5B0%5D.write(0)%3B%0Aarray%5B1%5D.write(1)%3B%0Aarray%5B2%5D.write(2)%3B%0A%0A%2F%2F%20SAFETY%3A%20%E7%8E%B0%E5%9C%A8%E5%AE%89%E5%85%A8%E4%BA%86%EF%BC%8C%E5%9B%A0%E4%B8%BA%E6%88%91%E4%BB%AC%E5%88%9D%E5%A7%8B%E5%8C%96%E4%BA%86%E6%89%80%E6%9C%89%E5%85%83%E7%B4%A0%0Alet%20array%20%3D%20unsafe%20%7B%0A%20%20%20%20MaybeUninit%3A%3Aarray_assume_init(array)%0A%7D%3B%0A%0Aassert_eq!(array%2C%20%5B0%2C%201%2C%202%5D)%3B%0A%7D&amp;version=nightly&amp;edition=2018">Run</a></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.slice_assume_init_ref" class="method has-srclink"><h4 class="code-header">pub unsafe fn <a href="#method.slice_assume_init_ref" class="fnname">slice_assume_init_ref</a>(slice: &amp;[Self]) -&gt; &amp;[T]</h4><a href="#method.slice_assume_init_ref" class="anchor"></a><a class="srclink" href="../../src/core/mem/maybe_uninit.rs.html#967-973" title="goto source code">[src]</a></div><div class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span> This is a nightly-only experimental API. (<code>maybe_uninit_slice</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/63569">#63569</a>)</div></div></summary><div class="docblock"><p>å‡è®¾æ‰€æœ‰å…ƒç´ éƒ½å·²åˆå§‹åŒ–ï¼Œè¯·å¯¹å…¶è¿›è¡Œåˆ‡ç‰‡ã€‚</p>
<h1 id="safety-6" class="section-header"><a href="#safety-6">Safety</a></h1>
<p>å–å†³äºè°ƒç”¨æ–¹ï¼Œä»¥ç¡®ä¿ <code>MaybeUninit&lt;T&gt;</code> å…ƒç´ ç¡®å®å¤„äºåˆå§‹åŒ–çŠ¶æ€ã€‚</p>
<p>åœ¨å†…å®¹å°šæœªå®Œå…¨åˆå§‹åŒ–æ—¶è°ƒç”¨æ­¤æ–¹æ³•ä¼šå¯¼è‡´æœªå®šä¹‰çš„è¡Œä¸ºã€‚</p>
<p>æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯å’Œç¤ºä¾‹ï¼Œè¯·å‚è§ <a href="union.MaybeUninit.html#method.assume_init_ref"><code>assume_init_ref</code></a>ã€‚</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.slice_assume_init_mut" class="method has-srclink"><h4 class="code-header">pub unsafe fn <a href="#method.slice_assume_init_mut" class="fnname">slice_assume_init_mut</a>(slice: &amp;mut [Self]) -&gt; &amp;mut [T]</h4><a href="#method.slice_assume_init_mut" class="anchor"></a><a class="srclink" href="../../src/core/mem/maybe_uninit.rs.html#989-993" title="goto source code">[src]</a></div><div class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span> This is a nightly-only experimental API. (<code>maybe_uninit_slice</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/63569">#63569</a>)</div></div></summary><div class="docblock"><p>å‡è®¾æ‰€æœ‰å…ƒç´ éƒ½å·²åˆå§‹åŒ–ï¼Œè¯·ä¸ºå…¶è·å–å¯å˜åˆ‡ç‰‡ã€‚</p>
<h1 id="safety-7" class="section-header"><a href="#safety-7">Safety</a></h1>
<p>å–å†³äºè°ƒç”¨æ–¹ï¼Œä»¥ç¡®ä¿ <code>MaybeUninit&lt;T&gt;</code> å…ƒç´ ç¡®å®å¤„äºåˆå§‹åŒ–çŠ¶æ€ã€‚</p>
<p>åœ¨å†…å®¹å°šæœªå®Œå…¨åˆå§‹åŒ–æ—¶è°ƒç”¨æ­¤æ–¹æ³•ä¼šå¯¼è‡´æœªå®šä¹‰çš„è¡Œä¸ºã€‚</p>
<p>æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯å’Œç¤ºä¾‹ï¼Œè¯·å‚è§ <a href="union.MaybeUninit.html#method.assume_init_mut"><code>assume_init_mut</code></a>ã€‚</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.slice_as_ptr" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.slice_as_ptr" class="fnname">slice_as_ptr</a>(this: &amp;[<a class="union" href="union.MaybeUninit.html" title="union core::mem::MaybeUninit">MaybeUninit</a>&lt;T&gt;]) -&gt; *const T</h4><a href="#method.slice_as_ptr" class="anchor"></a><a class="srclink" href="../../src/core/mem/maybe_uninit.rs.html#999-1001" title="goto source code">[src]</a></div><div class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span> This is a nightly-only experimental API. (<code>maybe_uninit_slice</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/63569">#63569</a>)</div></div></summary><div class="docblock"><p>è·å–ä¸€ä¸ªæŒ‡å‘æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆã€‚</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.slice_as_mut_ptr" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.slice_as_mut_ptr" class="fnname">slice_as_mut_ptr</a>(this: &amp;mut [<a class="union" href="union.MaybeUninit.html" title="union core::mem::MaybeUninit">MaybeUninit</a>&lt;T&gt;]) -&gt; *mut T</h4><a href="#method.slice_as_mut_ptr" class="anchor"></a><a class="srclink" href="../../src/core/mem/maybe_uninit.rs.html#1007-1009" title="goto source code">[src]</a></div><div class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span> This is a nightly-only experimental API. (<code>maybe_uninit_slice</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/63569">#63569</a>)</div></div></summary><div class="docblock"><p>è·å–æŒ‡å‘æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å¯å˜æŒ‡é’ˆã€‚</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.write_slice" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.write_slice" class="fnname">write_slice</a>&lt;'a&gt;(this: &amp;'a mut [<a class="union" href="union.MaybeUninit.html" title="union core::mem::MaybeUninit">MaybeUninit</a>&lt;T&gt;], src: &amp;[T]) -&gt; &amp;'a mut [T] <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="../marker/trait.Copy.html" title="trait core::marker::Copy">Copy</a>,&nbsp;</span></h4><a href="#method.write_slice" class="anchor"></a><a class="srclink" href="../../src/core/mem/maybe_uninit.rs.html#1055-1066" title="goto source code">[src]</a></div><div class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span> This is a nightly-only experimental API. (<code>maybe_uninit_write_slice</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/79995">#79995</a>)</div></div></summary><div class="docblock"><p>ä» <code>src</code> å¤åˆ¶å…ƒç´ ï¼Œå°† <code>this</code> ç°åœ¨åˆå§‹åŒ–çš„å†…å®¹è¿”å›ç»™ <code>this</code> çš„èµ„æºå¼•ç”¨ã€‚</p>
<p>å¦‚æœ <code>T</code> æœªå®ç° <code>Copy</code>ï¼Œè¯·ä½¿ç”¨ <a href="union.MaybeUninit.html#method.write_slice_cloned"><code>write_slice_cloned</code></a></p>
<p>è¿™ç±»ä¼¼äº <a href="https://doc.rust-lang.org/1.54.0/std/primitive.slice.html#method.copy_from_slice" title="slice::copy_from_slice"><code>slice::copy_from_slice</code></a>ã€‚</p>
<h1 id="panics" class="section-header"><a href="#panics">Panics</a></h1>
<p>å¦‚æœä¸¤ä¸ªåˆ‡ç‰‡çš„é•¿åº¦ä¸åŒï¼Œåˆ™æ­¤å‡½æ•°å°†ä¸º panicã€‚</p>
<h1 id="examples-10" class="section-header"><a href="#examples-10">Examples</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="attribute">#![<span class="ident">feature</span>(<span class="ident">maybe_uninit_write_slice</span>)]</span>
<span class="kw">use</span> <span class="ident">std::mem::MaybeUninit</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">dst</span> <span class="op">=</span> [<span class="ident">MaybeUninit::uninit</span>(); <span class="number">32</span>];
<span class="kw">let</span> <span class="ident">src</span> <span class="op">=</span> [<span class="number">0</span>; <span class="number">32</span>];

<span class="kw">let</span> <span class="ident">init</span> <span class="op">=</span> <span class="ident">MaybeUninit::write_slice</span>(<span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">dst</span>, <span class="kw-2">&amp;</span><span class="ident">src</span>);

<span class="macro">assert_eq!</span>(<span class="ident">init</span>, <span class="ident">src</span>);</pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(maybe_uninit_write_slice)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3AMaybeUninit%3B%0A%0Alet%20mut%20dst%20%3D%20%5BMaybeUninit%3A%3Auninit()%3B%2032%5D%3B%0Alet%20src%20%3D%20%5B0%3B%2032%5D%3B%0A%0Alet%20init%20%3D%20MaybeUninit%3A%3Awrite_slice(%26mut%20dst%2C%20%26src)%3B%0A%0Aassert_eq!(init%2C%20src)%3B%0A%7D&amp;version=nightly&amp;edition=2018">Run</a></div>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="attribute">#![<span class="ident">feature</span>(<span class="ident">maybe_uninit_write_slice</span>, <span class="ident">vec_spare_capacity</span>)]</span>
<span class="kw">use</span> <span class="ident">std::mem::MaybeUninit</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">vec</span> <span class="op">=</span> <span class="ident">Vec::with_capacity</span>(<span class="number">32</span>);
<span class="kw">let</span> <span class="ident">src</span> <span class="op">=</span> [<span class="number">0</span>; <span class="number">16</span>];

<span class="ident">MaybeUninit::write_slice</span>(<span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">vec</span>.<span class="ident">spare_capacity_mut</span>()[..<span class="ident">src</span>.<span class="ident">len</span>()], <span class="kw-2">&amp;</span><span class="ident">src</span>);

<span class="comment">// SAFETY: æˆ‘ä»¬åˆšåˆšå°† len çš„æ‰€æœ‰å…ƒç´ å¤åˆ¶åˆ°äº†å¤‡ç”¨å®¹é‡ä¸­ï¼Œvec çš„ç¬¬ä¸€ä¸ª src.len() å…ƒç´ ç°åœ¨æœ‰æ•ˆã€‚</span>
<span class="kw">unsafe</span> {
    <span class="ident">vec</span>.<span class="ident">set_len</span>(<span class="ident">src</span>.<span class="ident">len</span>());
}

<span class="macro">assert_eq!</span>(<span class="ident">vec</span>, <span class="ident">src</span>);</pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(maybe_uninit_write_slice%2C%20vec_spare_capacity)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3AMaybeUninit%3B%0A%0Alet%20mut%20vec%20%3D%20Vec%3A%3Awith_capacity(32)%3B%0Alet%20src%20%3D%20%5B0%3B%2016%5D%3B%0A%0AMaybeUninit%3A%3Awrite_slice(%26mut%20vec.spare_capacity_mut()%5B..src.len()%5D%2C%20%26src)%3B%0A%0A%2F%2F%20SAFETY%3A%20%E6%88%91%E4%BB%AC%E5%88%9A%E5%88%9A%E5%B0%86%20len%20%E7%9A%84%E6%89%80%E6%9C%89%E5%85%83%E7%B4%A0%E5%A4%8D%E5%88%B6%E5%88%B0%E4%BA%86%E5%A4%87%E7%94%A8%E5%AE%B9%E9%87%8F%E4%B8%AD%EF%BC%8Cvec%20%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%20src.len()%20%E5%85%83%E7%B4%A0%E7%8E%B0%E5%9C%A8%E6%9C%89%E6%95%88%E3%80%82%0Aunsafe%20%7B%0A%20%20%20%20vec.set_len(src.len())%3B%0A%7D%0A%0Aassert_eq!(vec%2C%20src)%3B%0A%7D&amp;version=nightly&amp;edition=2018">Run</a></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.write_slice_cloned" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.write_slice_cloned" class="fnname">write_slice_cloned</a>&lt;'a&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;this: &amp;'a mut [<a class="union" href="union.MaybeUninit.html" title="union core::mem::MaybeUninit">MaybeUninit</a>&lt;T&gt;], <br>&nbsp;&nbsp;&nbsp;&nbsp;src: &amp;[T]<br>) -&gt; &amp;'a mut [T] <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="../clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,&nbsp;</span></h4><a href="#method.write_slice_cloned" class="anchor"></a><a class="srclink" href="../../src/core/mem/maybe_uninit.rs.html#1115-1157" title="goto source code">[src]</a></div><div class="item-info"><div class="stab unstable"><span class="emoji">ğŸ”¬</span> This is a nightly-only experimental API. (<code>maybe_uninit_write_slice</code>&nbsp;<a href="https://github.com/rust-lang/rust/issues/79995">#79995</a>)</div></div></summary><div class="docblock"><p>å°†å…ƒç´ ä» <code>src</code> å…‹éš†åˆ° <code>this</code>ï¼Œè¿”å›ä¸€ä¸ªèµ„æºå¼•ç”¨å¼•ç”¨åˆ° <code>this</code> ç°åœ¨åˆå§‹åŒ–çš„å†…å®¹ã€‚
ä»»ä½•å·²ç»åˆå§‹åŒ–çš„å…ƒç´ éƒ½ä¸ä¼šè¢«ä¸¢å¼ƒã€‚</p>
<p>å¦‚æœ <code>T</code> å®ç° <code>Copy</code>ï¼Œè¯·ä½¿ç”¨ <a href="union.MaybeUninit.html#method.write_slice"><code>write_slice</code></a></p>
<p>è¿™ç±»ä¼¼äº <a href="https://doc.rust-lang.org/1.54.0/std/primitive.slice.html#method.clone_from_slice" title="slice::clone_from_slice"><code>slice::clone_from_slice</code></a>ï¼Œä½†ä¸ä¼šä¸¢å¼ƒç°æœ‰å…ƒç´ ã€‚</p>
<h1 id="panics-1" class="section-header"><a href="#panics-1">Panics</a></h1>
<p>å¦‚æœä¸¤ä¸ªåˆ‡ç‰‡çš„é•¿åº¦ä¸åŒï¼Œæˆ–è€… <code>Clone</code> panics çš„å®ç°ï¼Œåˆ™æ­¤å‡½æ•°å°†ä¸º panicã€‚</p>
<p>å¦‚æœå­˜åœ¨ panicï¼Œå°†ä¸¢å¼ƒå·²ç»å…‹éš†çš„å…ƒç´ ã€‚</p>
<h1 id="examples-11" class="section-header"><a href="#examples-11">Examples</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="attribute">#![<span class="ident">feature</span>(<span class="ident">maybe_uninit_write_slice</span>)]</span>
<span class="kw">use</span> <span class="ident">std::mem::MaybeUninit</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">dst</span> <span class="op">=</span> [<span class="ident">MaybeUninit::uninit</span>(), <span class="ident">MaybeUninit::uninit</span>(), <span class="ident">MaybeUninit::uninit</span>(), <span class="ident">MaybeUninit::uninit</span>(), <span class="ident">MaybeUninit::uninit</span>()];
<span class="kw">let</span> <span class="ident">src</span> <span class="op">=</span> [<span class="string">&quot;wibbly&quot;</span>.<span class="ident">to_string</span>(), <span class="string">&quot;wobbly&quot;</span>.<span class="ident">to_string</span>(), <span class="string">&quot;timey&quot;</span>.<span class="ident">to_string</span>(), <span class="string">&quot;wimey&quot;</span>.<span class="ident">to_string</span>(), <span class="string">&quot;stuff&quot;</span>.<span class="ident">to_string</span>()];

<span class="kw">let</span> <span class="ident">init</span> <span class="op">=</span> <span class="ident">MaybeUninit::write_slice_cloned</span>(<span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">dst</span>, <span class="kw-2">&amp;</span><span class="ident">src</span>);

<span class="macro">assert_eq!</span>(<span class="ident">init</span>, <span class="ident">src</span>);</pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(maybe_uninit_write_slice)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3AMaybeUninit%3B%0A%0Alet%20mut%20dst%20%3D%20%5BMaybeUninit%3A%3Auninit()%2C%20MaybeUninit%3A%3Auninit()%2C%20MaybeUninit%3A%3Auninit()%2C%20MaybeUninit%3A%3Auninit()%2C%20MaybeUninit%3A%3Auninit()%5D%3B%0Alet%20src%20%3D%20%5B%22wibbly%22.to_string()%2C%20%22wobbly%22.to_string()%2C%20%22timey%22.to_string()%2C%20%22wimey%22.to_string()%2C%20%22stuff%22.to_string()%5D%3B%0A%0Alet%20init%20%3D%20MaybeUninit%3A%3Awrite_slice_cloned(%26mut%20dst%2C%20%26src)%3B%0A%0Aassert_eq!(init%2C%20src)%3B%0A%7D&amp;version=nightly&amp;edition=2018">Run</a></div>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="attribute">#![<span class="ident">feature</span>(<span class="ident">maybe_uninit_write_slice</span>, <span class="ident">vec_spare_capacity</span>)]</span>
<span class="kw">use</span> <span class="ident">std::mem::MaybeUninit</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">vec</span> <span class="op">=</span> <span class="ident">Vec::with_capacity</span>(<span class="number">32</span>);
<span class="kw">let</span> <span class="ident">src</span> <span class="op">=</span> [<span class="string">&quot;rust&quot;</span>, <span class="string">&quot;is&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;pretty&quot;</span>, <span class="string">&quot;cool&quot;</span>, <span class="string">&quot;language&quot;</span>];

<span class="ident">MaybeUninit::write_slice_cloned</span>(<span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">vec</span>.<span class="ident">spare_capacity_mut</span>()[..<span class="ident">src</span>.<span class="ident">len</span>()], <span class="kw-2">&amp;</span><span class="ident">src</span>);

<span class="comment">// SAFETY: æˆ‘ä»¬åˆšåˆšå°† len çš„æ‰€æœ‰å…ƒç´ å…‹éš†åˆ°äº†å¤‡ç”¨å®¹é‡ä¸­ï¼Œvec çš„ç¬¬ä¸€ä¸ª src.len() å…ƒç´ ç°åœ¨æœ‰æ•ˆã€‚</span>
<span class="kw">unsafe</span> {
    <span class="ident">vec</span>.<span class="ident">set_len</span>(<span class="ident">src</span>.<span class="ident">len</span>());
}

<span class="macro">assert_eq!</span>(<span class="ident">vec</span>, <span class="ident">src</span>);</pre><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0A%23!%5Bfeature(maybe_uninit_write_slice%2C%20vec_spare_capacity)%5D%0Afn%20main()%20%7B%0Ause%20std%3A%3Amem%3A%3AMaybeUninit%3B%0A%0Alet%20mut%20vec%20%3D%20Vec%3A%3Awith_capacity(32)%3B%0Alet%20src%20%3D%20%5B%22rust%22%2C%20%22is%22%2C%20%22a%22%2C%20%22pretty%22%2C%20%22cool%22%2C%20%22language%22%5D%3B%0A%0AMaybeUninit%3A%3Awrite_slice_cloned(%26mut%20vec.spare_capacity_mut()%5B..src.len()%5D%2C%20%26src)%3B%0A%0A%2F%2F%20SAFETY%3A%20%E6%88%91%E4%BB%AC%E5%88%9A%E5%88%9A%E5%B0%86%20len%20%E7%9A%84%E6%89%80%E6%9C%89%E5%85%83%E7%B4%A0%E5%85%8B%E9%9A%86%E5%88%B0%E4%BA%86%E5%A4%87%E7%94%A8%E5%AE%B9%E9%87%8F%E4%B8%AD%EF%BC%8Cvec%20%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%20src.len()%20%E5%85%83%E7%B4%A0%E7%8E%B0%E5%9C%A8%E6%9C%89%E6%95%88%E3%80%82%0Aunsafe%20%7B%0A%20%20%20%20vec.set_len(src.len())%3B%0A%7D%0A%0Aassert_eq!(vec%2C%20src)%3B%0A%7D&amp;version=nightly&amp;edition=2018">Run</a></div>
</div></details></div></details><h2 id="trait-implementations" class="small-section-header">Trait Implementations<a href="#trait-implementations" class="anchor"></a></h2><div id="trait-implementations-list"><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Clone" class="impl has-srclink"><h3 class="code-header in-band">impl&lt;T:&nbsp;<a class="trait" href="../marker/trait.Copy.html" title="trait core::marker::Copy">Copy</a>&gt; <a class="trait" href="../clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> for <a class="union" href="union.MaybeUninit.html" title="union core::mem::MaybeUninit">MaybeUninit</a>&lt;T&gt;</h3><a href="#impl-Clone" class="anchor"></a><a class="srclink" href="../../src/core/mem/maybe_uninit.rs.html#261-267" title="goto source code">[src]</a></div></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><div id="method.clone" class="method trait-impl has-srclink"><h4 class="code-header">fn <a href="../clone/trait.Clone.html#tymethod.clone" class="fnname">clone</a>(&amp;self) -&gt; Self</h4><a href="#method.clone" class="anchor"></a><a class="srclink" href="../../src/core/mem/maybe_uninit.rs.html#263-266" title="goto source code">[src]</a></div></summary><div class='docblock'><p>è¿”å›å€¼çš„å‰¯æœ¬ã€‚ <a href="../clone/trait.Clone.html#tymethod.clone">Read more</a></p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.clone_from" class="method trait-impl has-srclink"><h4 class="code-header">fn <a href="../clone/trait.Clone.html#method.clone_from" class="fnname">clone_from</a>(&amp;mut self, source: &amp;Self)</h4><span class="since" title="Stable since Rust version 1.0.0">1.0.0</span><a href="#method.clone_from" class="anchor"></a><a class="srclink" href="../../src/core/clone.rs.html#130-132" title="goto source code">[src]</a></div></summary><div class='docblock'><p>ä» <code>source</code> æ‰§è¡Œå¤åˆ¶åˆ†é…ã€‚ <a href="../clone/trait.Clone.html#method.clone_from">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Debug" class="impl has-srclink"><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="../fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a> for <a class="union" href="union.MaybeUninit.html" title="union core::mem::MaybeUninit">MaybeUninit</a>&lt;T&gt;</h3><a href="#impl-Debug" class="anchor"></a><span class="since" title="Stable since Rust version 1.41.0">1.41.0</span><a class="srclink" href="../../src/core/mem/maybe_uninit.rs.html#270-274" title="goto source code">[src]</a></div></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><div id="method.fmt" class="method trait-impl has-srclink"><h4 class="code-header">fn <a href="../fmt/trait.Debug.html#tymethod.fmt" class="fnname">fmt</a>(&amp;self, f: &amp;mut <a class="struct" href="../fmt/struct.Formatter.html" title="struct core::fmt::Formatter">Formatter</a>&lt;'_&gt;) -&gt; <a class="type" href="../fmt/type.Result.html" title="type core::fmt::Result">Result</a></h4><a href="#method.fmt" class="anchor"></a><a class="srclink" href="../../src/core/mem/maybe_uninit.rs.html#271-273" title="goto source code">[src]</a></div></summary><div class='docblock'><p>ä½¿ç”¨ç»™å®šçš„æ ¼å¼åŒ–ç¨‹åºæ ¼å¼åŒ–è¯¥å€¼ã€‚ <a href="../fmt/trait.Debug.html#tymethod.fmt">Read more</a></p>
</div></details></div></details><div id="impl-Copy" class="impl has-srclink"><h3 class="code-header in-band">impl&lt;T:&nbsp;<a class="trait" href="../marker/trait.Copy.html" title="trait core::marker::Copy">Copy</a>&gt; <a class="trait" href="../marker/trait.Copy.html" title="trait core::marker::Copy">Copy</a> for <a class="union" href="union.MaybeUninit.html" title="union core::mem::MaybeUninit">MaybeUninit</a>&lt;T&gt;</h3><a href="#impl-Copy" class="anchor"></a><a class="srclink" href="../../src/core/mem/maybe_uninit.rs.html#253" title="goto source code">[src]</a></div></div><h2 id="synthetic-implementations" class="small-section-header">Auto Trait Implementations<a href="#synthetic-implementations" class="anchor"></a></h2><div id="synthetic-implementations-list"><div id="impl-Send" class="impl has-srclink"><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="../marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="union" href="union.MaybeUninit.html" title="union core::mem::MaybeUninit">MaybeUninit</a>&lt;T&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="../marker/trait.Send.html" title="trait core::marker::Send">Send</a>,&nbsp;</span></h3><a href="#impl-Send" class="anchor"></a></div><div id="impl-Sync" class="impl has-srclink"><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="../marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="union" href="union.MaybeUninit.html" title="union core::mem::MaybeUninit">MaybeUninit</a>&lt;T&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="../marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a>,&nbsp;</span></h3><a href="#impl-Sync" class="anchor"></a></div><div id="impl-Unpin" class="impl has-srclink"><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="../marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> for <a class="union" href="union.MaybeUninit.html" title="union core::mem::MaybeUninit">MaybeUninit</a>&lt;T&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="../marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a>,&nbsp;</span></h3><a href="#impl-Unpin" class="anchor"></a></div></div><h2 id="blanket-implementations" class="small-section-header">Blanket Implementations<a href="#blanket-implementations" class="anchor"></a></h2><div id="blanket-implementations-list"><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Any" class="impl has-srclink"><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="../any/trait.Any.html" title="trait core::any::Any">Any</a> for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: 'static + ?<a class="trait" href="../marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></h3><a href="#impl-Any" class="anchor"></a><a class="srclink" href="../../src/core/any.rs.html#132-136" title="goto source code">[src]</a></div></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><div id="method.type_id" class="method trait-impl has-srclink"><h4 class="code-header">pub fn <a href="../any/trait.Any.html#tymethod.type_id" class="fnname">type_id</a>(&amp;Self) -&gt; <a class="struct" href="../any/struct.TypeId.html" title="struct core::any::TypeId">TypeId</a></h4><a href="#method.type_id" class="anchor"></a><a class="srclink" href="../../src/core/any.rs.html#133-135" title="goto source code">[src]</a></div></summary><div class='docblock'><p>è·å– <code>self</code> çš„ <code>TypeId</code>ã€‚ <a href="../any/trait.Any.html#tymethod.type_id">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Borrow%3CT%3E" class="impl has-srclink"><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="../borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;T&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="../marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></h3><a href="#impl-Borrow%3CT%3E" class="anchor"></a><a class="srclink" href="../../src/core/borrow.rs.html#208-213" title="goto source code">[src]</a></div></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><div id="method.borrow" class="method trait-impl has-srclink"><h4 class="code-header">pub fn <a href="../borrow/trait.Borrow.html#tymethod.borrow" class="fnname">borrow</a>(&amp;Self) -&gt; &amp;T</h4><a href="#method.borrow" class="anchor"></a><a class="srclink" href="../../src/core/borrow.rs.html#210-212" title="goto source code">[src]</a></div></summary><div class='docblock'><p>ä»æ‹¥æœ‰çš„å€¼ä¸­ä¸€æˆä¸å˜åœ°å€Ÿç”¨ã€‚ <a href="../borrow/trait.Borrow.html#tymethod.borrow">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-BorrowMut%3CT%3E" class="impl has-srclink"><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="../borrow/trait.BorrowMut.html" title="trait core::borrow::BorrowMut">BorrowMut</a>&lt;T&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="../marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></h3><a href="#impl-BorrowMut%3CT%3E" class="anchor"></a><a class="srclink" href="../../src/core/borrow.rs.html#216-220" title="goto source code">[src]</a></div></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><div id="method.borrow_mut" class="method trait-impl has-srclink"><h4 class="code-header">pub fn <a href="../borrow/trait.BorrowMut.html#tymethod.borrow_mut" class="fnname">borrow_mut</a>(&amp;mut Self) -&gt; &amp;mut T</h4><a href="#method.borrow_mut" class="anchor"></a><a class="srclink" href="../../src/core/borrow.rs.html#217-219" title="goto source code">[src]</a></div></summary><div class='docblock'><p>ä»æ‹¥æœ‰çš„å€¼ä¸­å€Ÿç”¨ã€‚ <a href="../borrow/trait.BorrowMut.html#tymethod.borrow_mut">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-From%3CT%3E" class="impl has-srclink"><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="../convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for T</h3><a href="#impl-From%3CT%3E" class="anchor"></a><a class="srclink" href="../../src/core/convert/mod.rs.html#546-550" title="goto source code">[src]</a></div></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><div id="method.from" class="method trait-impl has-srclink"><h4 class="code-header">pub fn <a href="../convert/trait.From.html#tymethod.from" class="fnname">from</a>(T) -&gt; T</h4><a href="#method.from" class="anchor"></a><a class="srclink" href="../../src/core/convert/mod.rs.html#547-549" title="goto source code">[src]</a></div></summary><div class='docblock'><p>æ‰§è¡Œè½¬æ¢ã€‚</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Into%3CU%3E" class="impl has-srclink"><h3 class="code-header in-band">impl&lt;T, U&gt; <a class="trait" href="../convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="../convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt;,&nbsp;</span></h3><a href="#impl-Into%3CU%3E" class="anchor"></a><a class="srclink" href="../../src/core/convert/mod.rs.html#535-542" title="goto source code">[src]</a></div></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><div id="method.into" class="method trait-impl has-srclink"><h4 class="code-header">pub fn <a href="../convert/trait.Into.html#tymethod.into" class="fnname">into</a>(Self) -&gt; U</h4><a href="#method.into" class="anchor"></a><a class="srclink" href="../../src/core/convert/mod.rs.html#539-541" title="goto source code">[src]</a></div></summary><div class='docblock'><p>æ‰§è¡Œè½¬æ¢ã€‚</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-TryFrom%3CU%3E" class="impl has-srclink"><h3 class="code-header in-band">impl&lt;T, U&gt; <a class="trait" href="../convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="../convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;T&gt;,&nbsp;</span></h3><a href="#impl-TryFrom%3CU%3E" class="anchor"></a><a class="srclink" href="../../src/core/convert/mod.rs.html#583-592" title="goto source code">[src]</a></div></summary><div class="impl-items"><details class="rustdoc-toggle" open><summary><div id="associatedtype.Error-1" class="type trait-impl has-srclink"><h4 class="code-header">type <a href="../convert/trait.TryFrom.html#associatedtype.Error" class="type">Error</a> = <a class="enum" href="../convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a></h4><a href="#associatedtype.Error-1" class="anchor"></a></div></summary><div class='docblock'><p>å‘ç”Ÿè½¬æ¢é”™è¯¯æ—¶è¿”å›çš„ç±»å‹ã€‚</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.try_from" class="method trait-impl has-srclink"><h4 class="code-header">pub fn <a href="../convert/trait.TryFrom.html#tymethod.try_from" class="fnname">try_from</a>(U) -&gt; <a class="enum" href="../result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, &lt;T as <a class="trait" href="../convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt;&gt;::<a class="type" href="../convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4><a href="#method.try_from" class="anchor"></a><a class="srclink" href="../../src/core/convert/mod.rs.html#589-591" title="goto source code">[src]</a></div></summary><div class='docblock'><p>æ‰§è¡Œè½¬æ¢ã€‚</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-TryInto%3CU%3E" class="impl has-srclink"><h3 class="code-header in-band">impl&lt;T, U&gt; <a class="trait" href="../convert/trait.TryInto.html" title="trait core::convert::TryInto">TryInto</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="../convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;,&nbsp;</span></h3><a href="#impl-TryInto%3CU%3E" class="anchor"></a><a class="srclink" href="../../src/core/convert/mod.rs.html#569-578" title="goto source code">[src]</a></div></summary><div class="impl-items"><details class="rustdoc-toggle" open><summary><div id="associatedtype.Error" class="type trait-impl has-srclink"><h4 class="code-header">type <a href="../convert/trait.TryInto.html#associatedtype.Error" class="type">Error</a> = &lt;U as <a class="trait" href="../convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="type" href="../convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a></h4><a href="#associatedtype.Error" class="anchor"></a></div></summary><div class='docblock'><p>å‘ç”Ÿè½¬æ¢é”™è¯¯æ—¶è¿”å›çš„ç±»å‹ã€‚</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.try_into" class="method trait-impl has-srclink"><h4 class="code-header">pub fn <a href="../convert/trait.TryInto.html#tymethod.try_into" class="fnname">try_into</a>(Self) -&gt; <a class="enum" href="../result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;U, &lt;U as <a class="trait" href="../convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="type" href="../convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4><a href="#method.try_into" class="anchor"></a><a class="srclink" href="../../src/core/convert/mod.rs.html#575-577" title="goto source code">[src]</a></div></summary><div class='docblock'><p>æ‰§è¡Œè½¬æ¢ã€‚</p>
</div></details></div></details></div></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../../" data-current-crate="core" data-search-index-js="../../search-index1.55.0.js" data-search-js="../../search1.55.0.js"></div><script src="../../main1.55.0.js"></script></body></html>